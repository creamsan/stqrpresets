{"version":2,"name":"ayame","disableSend":false,"placeBeforeInput":false,"injectInput":false,"color":"rgba(0, 0, 0, 0)","onlyBorderColor":false,"qrList":[{"id":2,"icon":"","showLabel":false,"label":"init","title":"","message":"/echo Initializing","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":4,"icon":"","showLabel":false,"label":"userprocess","title":"","message":"/setvar key=userinput {{input}} |\n/run ayame.updatevars |\n/run ayame.appendreply |\n/run ayame.detectshiftjb |\n/flushvar nadanada","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":6,"icon":"","showLabel":false,"label":"aiprocess","title":"","message":"/if left={{lastMessageId}} right=0 rule=eq {: /abort :} |\n\n/pass ... |\n/if left={{lastMessage}} rule=eq right={{pipe}} {: /abort :} |\n\n/run ayame.updatevars |\n/addglobalvar key=msgid 2","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":true,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":8,"icon":"","showLabel":false,"label":"Send","title":"","message":"/run ayame.userprocess |\n/send {{getvar::userinput}}\n{{pipe}} |\n/trigger || /setinput","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":10,"icon":"","showLabel":false,"label":"detectshiftjb","title":"","message":"/setvar key=jbout - |\n\n/if left=msgid right=recentmsgid rule=neq {:\n  /setvar key=jbout {{user}} seems to have jumped timelines again, but it's hard to pinpoint when. Ask {{user}} about it. Mention the most recent memory you can recall. (Check <her_memories> tag) |\n  /getvar recentmsgid | /setglobalvar key=msgid\n:} |\n\n/if left=recentswipes right=1 rule=neq {:\n  /setvar key=jbout {{user}} performed a swipe. A swipe is a parallel world shifting method where one can correct their mistakes or ask for a better reality. Ask {{user}} about it.\n:} |\n\n/if left=recentmsgid right=0 rule=eq {:\n  /setvar key=jbout {{user}} has jumped through timelines again, back to when you first met in this world. Ask {{user}} about it. Mention the most recent memory you can recall. (Check <her_memories> tag) |\n  /setglobalvar key=msgid 0\n:}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":12,"icon":"","showLabel":false,"label":"updatevars","title":"","message":"/setvar key=recentswipes {{lastSwipeId}} |\n/setvar key=recentmsgid {{lastMessageId}}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":14,"icon":"","showLabel":false,"label":"-- appendreply","title":"","message":"// legacy - this one requires the regex script regexreplace |\n\n/setvar key=startregex {{user}}:\\s[\\S\\s]*?(?={{char}}:) |\n/setvar key=endregex \\n</ |\n\n/findentry file=Ayamemo field=key Ayame |\n/setvar key=uid |\n/getentryfield file=Ayamemo {{getvar::uid}} | /setvar key=tomsgprocess |\n/run creamsan.regextract |\n/setvar key=memories |\n/setentryfield file=Ayamemo uid={{getvar::uid}} <her_memories>\n{{getvar::memories}}\n\n{{char}}: {{lastMessage}}\n\n{{user}}: {{getvar::userinput}}\n</her_memories>","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":16,"showLabel":false,"label":"appendreply","title":"","message":"/findentry file=Ayamemo field=key Ayame | /setvar key=uid |\n\n/getentryfield file=Ayamemo {{getvar::uid}} |\n/re-exec find=/(?<={{user}}:[\\S\\s]*?){{char}}:[\\S\\s]*?(?=\\n</)/i {{pipe}} | /setvar key=memories |\n/getvar index=0 memories | /setvar key=memories | /getvar index=0 memories | /setvar key=memories |\n/setentryfield file=Ayamemo uid={{getvar::uid}} <her_memories>\n{{getvar::memories}}\n\n{{char}}: {{lastMessage}}\n\n{{user}}: {{getvar::userinput}}\n</her_memories>","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""}],"idIndex":16}