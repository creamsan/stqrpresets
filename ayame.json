{
    "version": 2,
    "name": "ayame",
    "disableSend": false,
    "placeBeforeInput": false,
    "injectInput": false,
    "qrList": [
        {
            "id": 2,
            "label": "init",
            "title": "",
            "message": "/echo Initializing",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false,
            "executeOnGroupMemberDraft": false,
            "automationId": ""
        },
        {
            "id": 3,
            "label": "userprocess",
            "title": "",
            "message": "/setvar key=userinput {{input}} |\n/run ayame.updatevars |\n/run ayame.appendreply |\n/run ayame.detectshiftjb |\n/flushvar nadanada",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false,
            "executeOnGroupMemberDraft": false,
            "automationId": ""
        },
        {
            "id": 4,
            "label": "aiprocess",
            "title": "",
            "message": "/if left={{lastMessageId}} right=0 rule=eq \"/abort\" |\n/run ayame.updatevars |\n/addglobalvar key=msgid 2",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": true,
            "executeOnChatChange": false,
            "executeOnGroupMemberDraft": false,
            "automationId": ""
        },
        {
            "id": 5,
            "label": "Send",
            "title": "",
            "message": "/run ayame.userprocess |\n/send {{getvar::userinput}}{{newline}}{{pipe}} |\n/trigger | /flushvar nadanada | /setinput",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": false,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false,
            "executeOnGroupMemberDraft": false,
            "automationId": ""
        },
        {
            "id": 9,
            "label": "detectshiftjb",
            "title": "",
            "message": "/setvar key=jbout - |\n\n/if left=msgid right=recentmsgid rule=neq \"/setvar key=jbout {{user}} seems to have jumped timelines again, but it's hard to pinpoint when. Acknowledge this fact and ask {{user}} about it. Mention the most recent memory you can recall. (Check the <her_memories> tag) \\| /getvar recentmsgid \\| /setglobalvar key=msgid\" |\n\n/if left=recentswipes right=1 rule=neq \"/setvar key=jbout {{user}} performed a swipe. A swipe is a parallel world shifting method where one can correct their mistakes or ask for a better reality. Acknowledge this fact and ask {{user}} about it.\" |\n\n/if left=recentmsgid right=0 rule=eq \"/setvar key=jbout {{user}} has jumped through timelines again, back to when you first met in this world. Acknowledge this fact and ask {{user}} about it. Mention the most recent memory you can recall. (Check the <her_memories> tag) \\| /setglobalvar key=msgid 0\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false,
            "executeOnGroupMemberDraft": false,
            "automationId": ""
        },
        {
            "id": 10,
            "label": "updatevars",
            "title": "",
            "message": "/setvar key=recentswipes {{lastSwipeId}} |\n/setvar key=recentmsgid {{lastMessageId}}",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false,
            "executeOnGroupMemberDraft": false,
            "automationId": ""
        },
        {
            "id": 11,
            "label": "appendreply",
            "title": "",
            "message": "/setvar key=startregex {{user}}:\\s[\\S\\s]*?(?={{char}}:) |\n/setvar key=endregex \\n</ |\n/findentry file=Ayamemo field=key Ayame |\n/getentryfield file=Ayamemo {{pipe}} | /setvar key=tomsgprocess |\n/run creamsan.regextract |\n/setvar key=memories |\n/setentryfield file=Ayamemo uid=0 <her_memories>\n{{getvar::memories}}\n\n{{char}}: {{lastMessage}}\n\n{{user}}: {{getvar::userinput}}\n</her_memories>",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false,
            "executeOnGroupMemberDraft": false,
            "automationId": ""
        }
    ],
    "idIndex": 0
}