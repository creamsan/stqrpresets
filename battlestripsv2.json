{"version":2,"name":"battlestripsv2","disableSend":false,"placeBeforeInput":false,"injectInput":false,"color":"rgba(0, 0, 0, 0)","onlyBorderColor":false,"qrList":[{"id":2,"icon":"","showLabel":false,"label":"init","title":"","message":"/echo Initializing |\n/if left={{lastMessageId}} right=0 rule=neq {: /abort :} |\n/echo May freeze momentarily, please wait |\n/delay 100 |\n/setvar key=girlname Default |\n\n/setvar key=usergridcolor #2d4d4f |\n/setvar key=chargridcolor #462b3c |\n/setvar key=hitgridcolor #bb2147 |\n/setvar key=missgridcolor #8a9396 |\n/setvar key=board user |\n/setvar key=chartargetcount 0 |\n/setvar key=gameover false |\n/setvar key=battle false |\n/setvar key=blocktrigger false |\n/setvar key=validgirlinfo true |\n\n/setvar key=gridtonum index=A1 0 |\n/setvar key=gridtonum index=a1 0 |\n/setvar key=gridtonum index=A2 1 |\n/setvar key=gridtonum index=a2 1 |\n/setvar key=gridtonum index=A3 2 |\n/setvar key=gridtonum index=a3 2 |\n/setvar key=gridtonum index=A4 3 |\n/setvar key=gridtonum index=a4 3 |\n/setvar key=gridtonum index=A5 4 |\n/setvar key=gridtonum index=a5 4 |\n/setvar key=gridtonum index=B1 5 |\n/setvar key=gridtonum index=b1 5 |\n/setvar key=gridtonum index=B2 6 |\n/setvar key=gridtonum index=b2 6 |\n/setvar key=gridtonum index=B3 7 |\n/setvar key=gridtonum index=b3 7 |\n/setvar key=gridtonum index=B4 8 |\n/setvar key=gridtonum index=b4 8 |\n/setvar key=gridtonum index=B5 9 |\n/setvar key=gridtonum index=b5 9 |\n/setvar key=gridtonum index=C1 10 |\n/setvar key=gridtonum index=c1 10 |\n/setvar key=gridtonum index=C2 11 |\n/setvar key=gridtonum index=c2 11 |\n/setvar key=gridtonum index=C3 12 |\n/setvar key=gridtonum index=c3 12 |\n/setvar key=gridtonum index=C4 13 |\n/setvar key=gridtonum index=c4 13 |\n/setvar key=gridtonum index=C5 14 |\n/setvar key=gridtonum index=c5 14 |\n/setvar key=gridtonum index=D1 15 |\n/setvar key=gridtonum index=d1 15 |\n/setvar key=gridtonum index=D2 16 |\n/setvar key=gridtonum index=d2 16 |\n/setvar key=gridtonum index=D3 17 |\n/setvar key=gridtonum index=d3 17 |\n/setvar key=gridtonum index=D4 18 |\n/setvar key=gridtonum index=d4 18 |\n/setvar key=gridtonum index=D5 19 |\n/setvar key=gridtonum index=d5 19 |\n/setvar key=gridtonum index=E1 20 |\n/setvar key=gridtonum index=e1 20 |\n/setvar key=gridtonum index=E2 21 |\n/setvar key=gridtonum index=e2 21 |\n/setvar key=gridtonum index=E3 22 |\n/setvar key=gridtonum index=e3 22 |\n/setvar key=gridtonum index=E4 23 |\n/setvar key=gridtonum index=e4 23 |\n/setvar key=gridtonum index=E5 24 |\n/setvar key=gridtonum index=e5 24 |\n\n/setvar key=numtogrid index=0 A1 |\n/setvar key=numtogrid index=1 A2 |\n/setvar key=numtogrid index=2 A3 |\n/setvar key=numtogrid index=3 A4 |\n/setvar key=numtogrid index=4 A5 |\n/setvar key=numtogrid index=5 B1 |\n/setvar key=numtogrid index=6 B2 |\n/setvar key=numtogrid index=7 B3 |\n/setvar key=numtogrid index=8 B4 |\n/setvar key=numtogrid index=9 B5 |\n/setvar key=numtogrid index=10 C1 |\n/setvar key=numtogrid index=11 C2 |\n/setvar key=numtogrid index=12 C3 |\n/setvar key=numtogrid index=13 C4 |\n/setvar key=numtogrid index=14 C5 |\n/setvar key=numtogrid index=15 D1 |\n/setvar key=numtogrid index=16 D2 |\n/setvar key=numtogrid index=17 D3 |\n/setvar key=numtogrid index=18 D4 |\n/setvar key=numtogrid index=19 D5 |\n/setvar key=numtogrid index=20 E1 |\n/setvar key=numtogrid index=21 E2 |\n/setvar key=numtogrid index=22 E3 |\n/setvar key=numtogrid index=23 E4 |\n/setvar key=numtogrid index=24 E5 |\n\n/setvar key=userboardhtml <div class='board'> |\n/setvar key=charboardhtml <div class='board'> |\n/setvar key=i 0 |\n/times 25 {: /run battlestripsv2.initgrid :} |\n/addvar key=userboardhtml </div> |\n/addvar key=charboardhtml </div> |\n\n/setvar key=arr {{getvar::numtogrid}} |\n/run creamsan.shuffle |\n/setvar key=charshots","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":4,"icon":"","showLabel":false,"label":"initgrid","title":"","message":"/getvar index={{getvar::i}} numtogrid |\n/setvar key=grid |\n\n/setvar key=userboard index={{getvar::i}} |\n/setvar key=charboard index={{getvar::i}} |\n\n/addvar key=userboardhtml <div class='grid user user{{getvar::i}}'>\n{{pipe}}\n</div> |\n\n/addvar key=charboardhtml <div class='grid char char{{getvar::i}}'>\n{{getvar::grid}}\n</div> |\n\n/addvar key=i 1","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":6,"icon":"","showLabel":false,"label":"-- userprocess","title":"","message":"// legacy - this one requires the regex script regexreplace |\n\n/setvar key=userinput {{input}} |\n/setvar key=jbout - |\n\n/if left=gameover right=true rule=eq {: /echo It's over. Use the normal Send button. | /abort :} |\n\n\n/let getgirlinfo {:\n\t/echo Setting up her grids, please wait |\n\t/delay 100 |\n\t/setvar key=toadd char |\n\t/setvar key=validgirlinfo true |\n\t/setvar key=tomsgprocess {{lastMessage}} |\n\t/setvar key=endregex (\\n[\\S\\s]+?[:\\-]\\s\\|\\n(?<=[\\S\\s]+?[:\\-][\\S\\s]+)```) |\n\t\n\t/setvar key=startregex name\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=girlname |\n\t/setvar key=varname girlname |\n\t/run creamsan.isvardefined | /setvar key=validgirlinfo |\n\t/if left=validgirlinfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex description\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=girldesc |\n\t/setvar key=varname girldesc |\n\t/run creamsan.isvardefined | /setvar key=validgirlinfo |\n\t/if left=validgirlinfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex clothes\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=girlclothesraw |\n\t/setvar key=varname girlclothesraw |\n\t/run creamsan.isvardefined | /setvar key=validgirlinfo |\n\t/if left=validgirlinfo right=false rule=eq {: /break :} |\n\t\n\t/run battlestripsv2.gentargets\n:} |\n\n/let validateinput {:\n\t/setvar key=startregex (?=[a-e][1-5]) |\n\t/setvar key=endregex (?<=[a-e][1-5]) |\n\t/setvar key=tomsgprocess {{getvar::tmpinputgrid}} |\n\t/run creamsan.regextract | /setvar key=inputgrid |\n\t\n\t/setvar key=varname inputgrid |\n\t/run creamsan.isvardefined |\n\t/if left={{pipe}} right=false rule=eq {:\n\t  /echo Invalid input | /break\n\t:} |\n\t\n\t/getvar index={{getvar::inputgrid}} gridtonum |\n\t/setvar key=inputgrid |\n\t\n\t/run playerturn |\n\t/setvar key=userlast {{getvar::tmpinputgrid}}\n:} |\n\n\n/let playerturn {:\n\t/if left=board right=user rule=eq else={:\n\t  /setvar key=namedisp {{user}} |\n\t  /setvar key=namedisp2 {{getvar::girlname}}\n\t:}\n\t{:\n\t  /setvar key=namedisp {{getvar::girlname}} |\n\t  /setvar key=namedisp2 {{user}}\n\t:} |\n\t\n\t/pass {{getvar::board}}board |\n\t/getvar index={{getvar::inputgrid}} {{pipe}} | /setvar key=gridlabel |\n\t\n\t/if left=misshit right=gridlabel rule=in {:\n\t  /echo The target grid has already been selected. |\n\t  /break\n\t:} |\n\t\n\t/if left=\"{{getvar::board}}targets\" right=gridlabel rule=in else={:\n\t  /echo {{getvar::namedisp}} missed |\n\t  /setvar key=class MISS\n\t:}\n\t{:\n\t  /echo severity=warning {{getvar::namedisp}} sunk one of {{getvar::namedisp2}}'s clothes |\n\t  /setvar key=class HIT |\n\t  /run battlestripsv2.hitplayer |\n\t  /setvar key=looping false\n\t:} |\n\t\n\t/setvar key=\"{{getvar::board}}board\" index={{getvar::inputgrid}} {{getvar::class}} |\n\t\n\t/setvar key=regexflags gi |\n\t/setvar key=regex \\b{{getvar::board}}{{getvar::inputgrid}}\\b\\|\\b{{getvar::tmpinputgrid}}\\b |\n\t/setvar key=toreplace {{getvar::class}} |\n\t/pass {{getvar::board}}boardhtml |\n\t/getvar {{pipe}} |\n\t/regex name=regexreplace |\n\t/setvar key=\"{{getvar::board}}boardhtml\" |\n\t\n\t/if left=board right=user rule=eq else={: /setvar key=board user :} {: /setvar key=board char :}\n:} |\n\n\n/let charselecttarget {:\n\t/getvar index={{getvar::chartargetcount}} charshots | /setvar key=tmpinputgrid |\n\n\t/getvar index={{getvar::tmpinputgrid}} gridtonum |\n\t/setvar key=inputgrid |\n\t\n\t/run playerturn |\n\t\n\t/addvar key=chartargetcount 1 |\n\t/setvar key=charlast {{getvar::tmpinputgrid}}\n:} |\n\n\n/let battleloop {:\n\t/setvar key=looping true |\n\n\t/while left=looping right=true rule=eq {:\n\t\t/if left=board right=user rule=eq {: /run charselecttarget :} |\n\t\t/if left=looping right=false rule=eq {: /break :} |\n\t\t\n\t\t/input <div class='maincont'>\n\t\t<style>\n\t\t.user{background-color: {{getvar::usergridcolor}}\n\t\t}\n\t\t.char{background-color: {{getvar::chargridcolor}}\n\t\t}\n\t\t.MISS{background-color: {{getvar::missgridcolor}}\n\t\t}\n\t\t.HIT{background-color: {{getvar::hitgridcolor}}\n\t\t}\n\t\t.maincont{display: flex;\n\t\tflex-direction: column;\n\t\tpadding: 5px;\n\t\twidth: 400px;\n\t\tgap: 10px\n\t\t}\n\t\t.board{padding: 1px;\n\t\tborder: 1px solid green;\n\t\tdisplay: inline-grid;\n\t\tgap: 1px;\n\t\tgrid-template-columns: 1fr 1fr 1fr 1fr 1fr\n\t\t}\n\t\t.grid{border: 1px solid white;\n\t\tborder-radius: 2px;\n\t\twidth: 35px;\n\t\theight: 35px;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpadding: 1px;\n\t\tfont-size: 10px\n\t\t}\n\t\t.info{width: 40%;\n\t\tfont-size: 10px;\n\t\ttext-wrap: wrap\n\t\t}\n\t\t.playercont{display: flex;\n\t\ttext-align: left;\n\t\tjustify-content: center;\n\t\tgap: 5px\n\t\t}\n\t\t</style>\n\t\t\n\t\t<div class='playercont'>\n\t\t{{getvar::charboardhtml}}\n\t\t<div class='info'>\n\t\t<b>{{getvar::girlname}}'s board</b><br>\n\t\t<hr>\n\t\tYour last shot: {{getvar::userlast}}\n\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class='playercont'>\n\t\t{{getvar::userboardhtml}}\n\t\t<div class='info'>\n\t\t<b>Your board</b><br>\n\t\t<hr>\n\t\tHer last shot: {{getvar::charlast}}\n\t\t</div>\n\t\t</div>\n\t\t\n\t\t</div>\n\t\t\n\t\t<div style='text-align: left; font-size: 10px; color: grey'>\n\t\tInput target grid. Ex: D3 or a4<br>\n\t\tInput <font color=red>giveup</font> to end the game.\n\t\t</div> |\n\t\t\n\t\t/setvar key=tmpinputgrid |\n\t\t\n\t\t/if left=tmpinputgrid right=giveup rule=eq {:\n\t\t  /run battlestripsv2.giveup | /break\n\t\t:} |\n\t\t\n\t\t/if left=board right=char rule=eq {: /run validateinput :}\n\t:}\n:} |\n\n\n/setvar key=jbout NOBODY is playing yet, so avoid writing anyone losing clothes. Include the following code block at the end of the response to resume the game: ```\nRESUME GAME\n``` |\n\n/if left={{lastMessageId}} right=0 rule=eq {:\n  /run battlestripsv2.getuserinfo |\n  /setvar key=jbout Write a vivid introduction scene ONLY for the girl, and then include her info in the code block: ```\nName: Her name\nDescription: Her description\nClothes: Her list of clothes in array form. Always include her underwear. Example: [black crop top, skinny jeans, canvas shoes, black bra, black panties]\n```\nNOBODY is playing yet, so avoid writing anyone losing clothes.\n:} |\n\n/if left={{lastMessageId}} right=2 rule=eq {: /run getgirlinfo :} |\n/if left=validgirlinfo right=false rule=eq {:\n  /echo Her info is invalid or incomplete |\n  /setvar key=blocktrigger true\n:} |\n\n/run battlestripsv2.resumegame |\n\n/if left=battle right=true rule=eq {:\n  /run battleloop |\n  /setvar key=battle false\n:} |\n\n/flushvar nadanada","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":38,"showLabel":false,"label":"userprocess","title":"","message":"/setvar key=userinput {{input}} |\n/setvar key=jbout - |\n\n/if left=gameover right=true rule=eq {: /echo It's over. Use the normal Send button. | /abort :} |\n\n\n/let getgirlinfo {:\n\t/echo Setting up her grids, please wait |\n\t/delay 100 |\n\t/setvar key=toadd char |\n\t/setvar key=validgirlinfo true |\n\t/setvar key=endregex (\\n[\\S\\s]+?[:\\-]\\s\\|\\n(?<=[\\S\\s]+?[:\\-][\\S\\s]+)```) |\n\t\n\t/re-exec find=/(?<=name\\s?[:\\-]\\s)[\\S\\s]+?(?={{getvar::endregex}})/gi {{lastMessage}} | /setvar key=girlname |\n\t/getvar index=0 girlname | /setvar key=girlname | /getvar index=0 girlname | /setvar key=girlname |\n\t/run varname=girlname creamsan.isvardefined | /setvar key=validgirlinfo |\n\t/if left=validgirlinfo right=false rule=eq {: /break :} |\n\t\n\t/re-exec find=/(?<=description\\s?[:\\-]\\s)[\\S\\s]+?(?={{getvar::endregex}})/gi {{lastMessage}} | /setvar key=girldesc |\n\t/getvar index=0 girldesc | /setvar key=girldesc | /getvar index=0 girldesc | /setvar key=girldesc |\n\t/run varname=girldesc creamsan.isvardefined | /setvar key=validgirlinfo |\n\t/if left=validgirlinfo right=false rule=eq {: /break :} |\n\t\n\t/re-exec find=/(?<=clothes\\s?[:\\-]\\s)[\\S\\s]+?(?={{getvar::endregex}})/gi {{lastMessage}} | /setvar key=girlclothesraw |\n\t/getvar index=0 girlclothesraw | /setvar key=girlclothesraw | /getvar index=0 girlclothesraw | /setvar key=girlclothesraw |\n\t/run varname=girlclothesraw creamsan.isvardefined | /setvar key=validgirlinfo |\n\t/if left=validgirlinfo right=false rule=eq {: /break :} |\n\t\n\t/run battlestripsv2.gentargets\n:} |\n\n/let validateinput {:\t\n\t/re-exec find=/[a-e][1-5]/i {{getvar::tmpinputgrid}} | /setvar key=inputgrid |\n\t/getvar index=0 inputgrid | /setvar key=inputgrid | /getvar index=0 inputgrid | /setvar key=inputgrid |\n\t\n\t/run varname=inputgrid creamsan.isvardefined |\n\t/if left={{pipe}} right=false rule=eq {:\n\t  /echo Invalid input | /break\n\t:} |\n\t\n\t/getvar index={{getvar::inputgrid}} gridtonum |\n\t/setvar key=inputgrid |\n\t\n\t/run playerturn |\n\t/setvar key=userlast {{getvar::tmpinputgrid}}\n:} |\n\n\n/let playerturn {:\n\t/if left=board right=user rule=eq else={:\n\t  /setvar key=namedisp {{user}} |\n\t  /setvar key=namedisp2 {{getvar::girlname}}\n\t:}\n\t{:\n\t  /setvar key=namedisp {{getvar::girlname}} |\n\t  /setvar key=namedisp2 {{user}}\n\t:} |\n\t\n\t/pass {{getvar::board}}board |\n\t/getvar index={{getvar::inputgrid}} {{pipe}} | /setvar key=gridlabel |\n\t\n\t/if left=misshit right=gridlabel rule=in {:\n\t  /echo The target grid has already been selected. |\n\t  /break\n\t:} |\n\t\n\t/if left=\"{{getvar::board}}targets\" right=gridlabel rule=in else={:\n\t  /echo {{getvar::namedisp}} missed |\n\t  /setvar key=class MISS\n\t:}\n\t{:\n\t  /echo severity=warning {{getvar::namedisp}} sunk one of {{getvar::namedisp2}}'s clothes |\n\t  /setvar key=class HIT |\n\t  /run battlestripsv2.hitplayer |\n\t  /setvar key=looping false\n\t:} |\n\t\n\t/setvar key=\"{{getvar::board}}board\" index={{getvar::inputgrid}} {{getvar::class}} |\n\t/pass {{getvar::board}}boardhtml |\n\t/getvar {{pipe}} |\n\t/re-replace find=/\\b{{getvar::board}}{{getvar::inputgrid}}\\b\\|\\b{{getvar::tmpinputgrid}}\\b/gi replace={{getvar::class}} |\n\t/setvar key=\"{{getvar::board}}boardhtml\" |\n\t\n\t/if left=board right=user rule=eq else={: /setvar key=board user :} {: /setvar key=board char :}\n:} |\n\n\n/let charselecttarget {:\n\t/getvar index={{getvar::chartargetcount}} charshots | /setvar key=tmpinputgrid |\n\n\t/getvar index={{getvar::tmpinputgrid}} gridtonum |\n\t/setvar key=inputgrid |\n\t\n\t/run playerturn |\n\t\n\t/addvar key=chartargetcount 1 |\n\t/setvar key=charlast {{getvar::tmpinputgrid}}\n:} |\n\n\n/let battleloop {:\n\t/setvar key=looping true |\n\n\t/while left=looping right=true rule=eq {:\n\t\t/if left=board right=user rule=eq {: /run charselecttarget :} |\n\t\t/if left=looping right=false rule=eq {: /break :} |\n\t\t\n\t\t/input <div class='maincont'>\n\t\t<style>\n\t\t.user{background-color: {{getvar::usergridcolor}}\n\t\t}\n\t\t.char{background-color: {{getvar::chargridcolor}}\n\t\t}\n\t\t.MISS{background-color: {{getvar::missgridcolor}}\n\t\t}\n\t\t.HIT{background-color: {{getvar::hitgridcolor}}\n\t\t}\n\t\t.maincont{display: flex;\n\t\tflex-direction: column;\n\t\tpadding: 5px;\n\t\twidth: 400px;\n\t\tgap: 10px\n\t\t}\n\t\t.board{padding: 1px;\n\t\tborder: 1px solid green;\n\t\tdisplay: inline-grid;\n\t\tgap: 1px;\n\t\tgrid-template-columns: 1fr 1fr 1fr 1fr 1fr\n\t\t}\n\t\t.grid{border: 1px solid white;\n\t\tborder-radius: 2px;\n\t\twidth: 35px;\n\t\theight: 35px;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpadding: 1px;\n\t\tfont-size: 10px\n\t\t}\n\t\t.info{width: 40%;\n\t\tfont-size: 10px;\n\t\ttext-wrap: wrap\n\t\t}\n\t\t.playercont{display: flex;\n\t\ttext-align: left;\n\t\tjustify-content: center;\n\t\tgap: 5px\n\t\t}\n\t\t</style>\n\t\t\n\t\t<div class='playercont'>\n\t\t{{getvar::charboardhtml}}\n\t\t<div class='info'>\n\t\t<b>{{getvar::girlname}}'s board</b><br>\n\t\t<hr>\n\t\tYour last shot: {{getvar::userlast}}\n\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class='playercont'>\n\t\t{{getvar::userboardhtml}}\n\t\t<div class='info'>\n\t\t<b>Your board</b><br>\n\t\t<hr>\n\t\tHer last shot: {{getvar::charlast}}\n\t\t</div>\n\t\t</div>\n\t\t\n\t\t</div>\n\t\t\n\t\t<div style='text-align: left; font-size: 10px; color: grey'>\n\t\tInput target grid. Ex: D3 or a4<br>\n\t\tInput <font color=red>giveup</font> to end the game.\n\t\t</div> |\n\t\t\n\t\t/setvar key=tmpinputgrid |\n\t\t\n\t\t/if left=tmpinputgrid right=giveup rule=eq {:\n\t\t  /run battlestripsv2.giveup | /break\n\t\t:} |\n\t\t\n\t\t/if left=board right=char rule=eq {: /run validateinput :}\n\t:}\n:} |\n\n\n/setvar key=jbout NOBODY is playing yet, so avoid writing anyone losing clothes. Include the following code block at the end of the response to resume the game: ```\nRESUME GAME\n``` |\n\n/if left={{lastMessageId}} right=0 rule=eq {:\n  /run battlestripsv2.getuserinfo |\n  /setvar key=jbout Write a vivid introduction scene ONLY for the girl, and then include her info in the code block: ```\nName: Her name\nDescription: Her description\nClothes: Her list of clothes in array form. Always include her underwear. Example: [black crop top, skinny jeans, canvas shoes, black bra, black panties]\n```\nNOBODY is playing yet, so avoid writing anyone losing clothes.\n:} |\n\n/if left={{lastMessageId}} right=2 rule=eq {: /run getgirlinfo :} |\n/if left=validgirlinfo right=false rule=eq {:\n  /echo Her info is invalid or incomplete |\n  /setvar key=blocktrigger true\n:} |\n\n/run battlestripsv2.resumegame |\n\n/if left=battle right=true rule=eq {:\n  /run battleloop |\n  /setvar key=battle false\n:} |\n\n/flushvar nadanada","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":8,"icon":"","showLabel":false,"label":"aiprocess","title":"","message":"/if left={{lastMessageId}} right=0 rule=eq {: /abort :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":true,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":10,"icon":"","showLabel":false,"label":"Send","title":"","message":"/run battlestripsv2.userprocess |\n/if left=blocktrigger right=true rule=eq else={:\n  /send {{getvar::userinput}}\n{{pipe}} |\n  /trigger\n:}\n{:\n  /setvar key=blocktrigger false\n:} ||\n/setinput","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":24,"icon":"","showLabel":false,"label":"getuserinfo","title":"","message":"/echo Setting up your grids, please wait |\n/delay 100 |\n/setvar key=toadd user |\n/run battlestripsv2.gentargets","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":26,"icon":"","showLabel":false,"label":"-- gentargets","title":"","message":"// legacy - this one requires the regex script regexreplace |\n\n/setvar key=tomsgprocess {{lastMessage}} |\n/setvar key=startregex \\[\\s*\"?\\s* |\n/setvar key=endregex (,\\s*\"?\\|\\s*\"?\\s*\\]) |\n/run creamsan.shuffle | /setvar key=targetsbase |\n\n/setvar key=i 0 |\n/setvar key=looping true |\n/while left=looping right=true rule=eq {:\n\t/run creamsan.regextract | /setvar key=clothing |\n\t/setvar key=varname clothing |\n\t/run creamsan.isvardefined |\n\t/if left={{pipe}} right=false rule=eq {:\n\t  /setvar key=looping false | /break\n\t:} |\n\t\n\t/flushvar toreplace |\n\t/setvar key=regex \\[[^,]+?\\]\\|(?<=\\[\\s*){{getvar::clothing}},\\s* |\n\t/setvar key=regexflags i |\n\t/regex name=regexreplace {{getvar::tomsgprocess}} |\n\t/setvar key=tomsgprocess |\n\t\n\t/setvar key=\"{{getvar::toadd}}clothes\" index={{getvar::i}} {{getvar::clothing}} |\n\t/getvar index={{getvar::i}} targetsbase |\n\t/setvar key=\"{{getvar::toadd}}targets\" index={{getvar::i}} |\n\t\n\t/if left=toadd right=user rule=eq {:\n\t  /setvar key=regex {{pipe}} |\n\t  /setvar key=toreplace {{pipe}}🛥️ |\n\t  /regex name=regexreplace {{getvar::userboardhtml}} |\n\t  /setvar key=userboardhtml\n\t:} |\n\t\n\t/addvar key=i 1\n:} |\n\n/if left=toadd right=user rule=eq else={: /echo {{getvar::girlname}}'s grids have been successfully generated. :} {: /echo Your grids have been successfully generated. :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":40,"showLabel":false,"label":"gentargets","title":"","message":"/setvar key=tomsgprocess {{lastMessage}} |\n/run creamsan.shuffle | /setvar key=targetsbase |\n\n/setvar key=i 0 |\n/setvar key=looping true |\n/while left=looping right=true rule=eq {:\n\t/re-exec find=/(?<=\\[\\|\\,\\s)[^\\,\\]]+/i {{getvar::tomsgprocess}} | /setvar key=clothing |\n\t/getvar index=0 clothing | /setvar key=clothing | /getvar index=0 clothing | /setvar key=clothing |\n\t/run varname=clothing creamsan.isvardefined |\n\t/if left={{pipe}} right=false rule=eq {:\n\t  /setvar key=looping false | /break\n\t:} |\n\t\n\t/re-replace find=/\\[[^,]+?\\]\\|(?<=\\[\\s*){{getvar::clothing}},\\s*/i replace={{noop}} {{getvar::tomsgprocess}} |\n\t/setvar key=tomsgprocess |\n\t\n\t/setvar key=\"{{getvar::toadd}}clothes\" index={{getvar::i}} {{getvar::clothing}} |\n\t/getvar index={{getvar::i}} targetsbase |\n\t/setvar key=\"{{getvar::toadd}}targets\" index={{getvar::i}} |\n\t\n\t/if left=toadd right=user rule=eq {:\n\t\t/re-replace find=/{{pipe}}/i replace={{pipe}}🛥️ {{getvar::userboardhtml}} | /setvar key=userboardhtml\n\t:} |\n\t\n\t/addvar key=i 1\n:} |\n\n/if left=toadd right=user rule=eq else={: /echo {{getvar::girlname}}'s grids have been successfully generated. :} {: /echo Your grids have been successfully generated. :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":30,"icon":"","showLabel":false,"label":"hitplayer","title":"","message":"/pass {{getvar::board}}clothes |\n/getvar {{pipe}} |\n/setvar key=arr |\n/run topopidx=0 creamsan.pop |\n/setvar key=\"{{getvar::board}}clothes\" |\n/setvar key=clothes |\n/setvar key=clothing {{getvar::popval}} |\n/setvar key=jbout - After some exchange of shots, with a few misses here and there, {{getvar::namedisp}} sinks one of {{getvar::namedisp2}}'s clothes at grid coordinate {{getvar::tmpinputgrid}}.\n- {{getvar::namedisp2}}'s {{getvar::clothing}} magically disappears.\n- {{getvar::namedisp2}}'s remaining clothing: {{getvar::clothes}}\n- Vividly narrate this scene and {{getvar::girlname}}'s reaction. |\n\n/run varname=clothes creamsan.isvardefined |\n/if left={{pipe}} right=false rule=eq {: /run battlestripsv2.announcewinner :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":32,"icon":"","showLabel":false,"label":"announcewinner","title":"","message":"/setvar key=gameover true |\n/echo severity=warning {{getvar::namedisp}} wins! |\n/setvar key=jbout {{getvar::jbout}}\n- {{getvar::namedisp2}} has no more clothes remaining.\n- {{getvar::namedisp}} is the winner.","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":34,"icon":"","showLabel":false,"label":"giveup","title":"","message":"/setvar key=looping false |\n/setvar key=gameover true |\n/echo severity=error Game over |\n/setvar key=jbout - {{user}} gives up.\n- All his clothes magically disappear.\n- {{getvar::girlname}} is the winner.","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":36,"icon":"","showLabel":false,"label":"-- resumegame","title":"","message":"//legacy\n\n/setvar key=tomsgprocess {{lastMessage}} |\n/setvar key=startregex ```\\s* |\n/setvar key=endregex \\s*``` |\n/run creamsan.regextract |\n/if left={{pipe}} right=\"resume\" rule=in {: /setvar key=battle true :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":44,"showLabel":false,"label":"resumegame","title":"","message":"/re-exec find=/(?<=```\\s*)[\\S\\s]+?(?=\\s*```)/i {{lastMessage}} | /setvar key=extracted |\n/getvar index=0 extracted | /setvar key=extracted | /getvar index=0 extracted |\n/if left={{pipe}} right=\"resume\" rule=in {: /setvar key=battle true :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""}],"idIndex":46}