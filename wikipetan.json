{"version":2,"name":"wikipetan","disableSend":false,"placeBeforeInput":false,"injectInput":false,"color":"rgba(0, 0, 0, 0)","onlyBorderColor":false,"qrList":[{"id":2,"showLabel":false,"label":"init","title":"","message":"/echo Initializing |\n/if left={{lastMessageId}} rule=neq right=0 {: /abort :} |\n\n/setvar key=emotedict {\n\t\"fallback\":\"Wikipe-tan_full_length.svg\",\n\t\"fanservice\":\"{{random:Neko_Wikipe-tan.png,Wikipe_tan_wearing_a_bikini_by_Kasuga39.png}}\",\n\t\"smug\":\"Simple_Wikipe_tan_by_Kasuga39.png\",\n\t\"amused\":\"Simple_Wikipe_tan_by_Kasuga39.png\",\n\t\"angry\":\"Angry_Wikipe-tan.png\",\n\t\"annoyed\":\"Angry_Wikipe-tan.png\",\n\t\"approved\":\"Simple_Wikipe_tan_by_Kasuga39.png, Wikipe-tan_full_length.svg\",\n\t\"confused\":\"Wikipe-tan_at_her_computer.png\",\n\t\"disappointed\":\"Angry_Wikipe-tan.png\",\n\t\"disapproved\":\"Angry_Wikipe-tan.png\",\n\t\"disgusted\":\"Angry_Wikipe-tan.png\",\n\t\"curious\":\"{{random:Sock_puppetting.svg,Paranormal_wikipe-tan.png}}\",\n\t\"intrigued\":\"Paranormal_wikipe-tan.png\",\n\t\"fun_time\":\"Ragtime_Wikipe-tan.png\",\n\t\"old_time\":\"Ragtime_Wikipe-tan.png\",\n\t\"rag_time\":\"Ragtime_Wikipe-tan.png\",\n\t\"excited\":\"{{random:Sock_puppetting.svg,Wikipe-tan_full_length.svg}}\",\n\t\"afraid\":\"Wikipe-tan_moyai_emoji.svg\",\n\t\"happy\":\"{{random:Sock_puppetting.svg,Wikipe-tan_full_length.svg}}\",\n\t\"nervous\":\"Wikipe-tan_at_her_computer.png\",\n\t\"cleaning_up_mess\":\"Wikipe-tan_mopping.png\",\n\t\"optimistic\":\"{{random:Sock_puppetting.svg,Wikipe-tan_coaching.png}}\",\n\t\"holding_sign\":\"Wikipe-tan_holding_sign.png\",\n\t\"accepting_donation\":\"{{random:Wikipe-tan_needs_your_help.png,Wikipe-tan_at_Valentine's_Day.png,Wikipe-tan_Birthday.png}}\",\n\t\"accepting_gift\":\"{{random:Wikipe-tan_Birthday.png,Wikipe-tan_needs_your_help.png}}\",\n\t\"giving_gift\":\"Wikipe-tan_Birthday.png\",\n\t\"determined\":\"{{random:Wikipe-tan_on_the_haystack.png,Wikipe-tan_coaching.png}}\",\n\t\"proud\":\"Wikipe-tan_heraldry.svg\",\n\t\"sad\":\"Wikipe-tan-crying.png\",\n\t\"cry_loud\":\"Wikipe-tan_crying.svg\",\n\t\"surprise\":\"{{random:Wikipe-tan_full_length.svg,Wikipe-tan_at_her_computer.png}}\",\n\t\"neutral\":\"{{random:Wikipe-tan_full_length.svg,Wikipe-tan_GothLoli.png,Sock_puppetting.svg}}\",\n\t\"speechless\":\"Wikipe-tan_at_her_computer.png\",\n\t\"thinking\":\"Wikipe-tan_meditating.png\",\n\t\"study\":\"{{random:Kasuga_s_Wikipedia_Submission_by_cult50contests.jpg,Wikipe-tan_the_Library_of_Babel.png,Wikipe-tan_coaching.png}}\",\n\t\"welcoming\":\"Kasuga_s_Wikipedia_Submission_by_cult50contests.jpg\",\n\t\"fbi\":\"Wikipe-tan_in_black.png\",\n\t\"suspicious\":\"Wikipe-tan_in_black.png\",\n\t\"cleaning\":\"Wikipe-tan_mopping.png\",\n\t\"serious\":\"Wikipe-tan_moyai_emoji.svg\"\n} |\n\n/run wikipetan.extractvals |\n/setvar key=emoteimg Kasuga_s_Wikipedia_Submission_by_cult50contests.jpg |\n/run wikipetan.tohtml |\n/run wikipetan.makeoutput |\n\n/comment <style>\n#maincont {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.underlined {\n  text-decoration: underline;\n}\n\n.italic {\n  font-style: italic;\n}\n\n.link {\n  color: #7e72f0;\n}\n\n.title {\n  font-size: 2em;\n  font-style: italic;\n}\n\n.gap-10 {\n  display: flex;\n  gap: 10px;\n}\n\nimg {\n  max-width: 500px;\n}\n\n.image-with-caption {\n  border: 1px solid black;\n  padding: 5px;\n  float: right;\n  display: inline-block;\n  background-color: --SmartThemeBlurTintColor;\n  width: 25%;\n  gap: 5px;\n}\n\n.quote {\n  border: 1px solid black;\n  padding: 5px;\n  float: right;\n  display: inline-block;\n  background-color: --SmartThemeBlurTintColor;\n  width: 25%;\n  gap: 5px;\n}\n\n#top {\n  display: flex;\n  justify-content: space-between;\n}\n\n#disclaimer {\n  margin-left: 15px;\n  padding: 15px;\n}\n\n#emote {\n  height: 200px;\n}\n\n.content-title {\n  font-size: 1.8em;\n}\n\n.content {\n  gap: 5px;\n  margin-bottom: 20px;\n}\n\n.header-border {\n  height: 2px;\n  background-color: #c1c0cf;\n  border: none;\n}\n\n.see-also-content {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n}\n</style>\n\n<details>\n<summary>READ ME</summary>\nScript will format her response into a Wikipedia-like article. The AI must follow the format specified in the post-history instructions. Potential issues: AI might generate 2 wiki articles in one response. The script won't handle this. Instead cut the second article and separate them.\n</details>","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":3,"showLabel":false,"label":"userprocess","title":"","message":"/setvar key=userinput {{input}} |\n\n/flushvar nadanada","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":true,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":4,"showLabel":false,"label":"aiprocess","title":"","message":"/if left={{lastMessageId}} right=0 rule=eq {: /abort :} |\n\n\n/pass ... |\n/if left={{lastMessage}} rule=eq right={{pipe}} {: /abort :} |\n\n/run wikipetan.extractvals |\n/run wikipetan.tohtml |\n/run wikipetan.makeoutput","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":true,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":5,"showLabel":false,"label":"Send","title":"","message":"/run PRESETNAME.userprocess |\n/send {{getvar::userinput}}\n{{pipe}} |\n/trigger || /setinput\n\n\n//alt\n/*\n/run PRESETNAME.userprocess |\n/if left=blocktrigger right=true rule=eq else={:\n  /send {{getvar::userinput}}\n{{pipe}} |\n  /trigger\n:}\n{:\n  /setvar key=blocktrigger false\n:} ||\n/setinput\n*/","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":9,"showLabel":false,"label":"extractvals","title":"","message":"/setvar key=emote fallback |\n/re-exec find=/(?<=emote:\\s)[\\s\\S]+?(?=\\n)/i {{lastMessage}} |\n/setvar key=emote | /getvar index=0 emote | /setvar key=emote | /getvar index=0 emote | /setvar key=emote |\n\n/re-exec find=/(?<=_)[^_]*$/mi {{getvar::emote}} |\n/setvar key=signtext | /getvar index=0 signtext | /setvar key=signtext | /getvar index=0 signtext | /setvar key=signtext |\n\n/re-test find=/holding_sign/i {{getvar::emote}} |\n/if left={{pipe}} right=true rule=eq else={:\n\t/getvar index={{getvar::emote}} emotedict | /setvar key=emoteimg\n:}\n{:\n\t/getvar index=holding_sign emotedict | /setvar key=emoteimg\n:} |\n\t\n/re-exec find=/(?<=title:\\s)[\\s\\S]+?(?=\\n)/i {{lastMessage}} |\n/setvar key=title | /getvar index=0 title | /setvar key=title | /getvar index=0 title | /setvar key=title |\n\n/re-exec find=\"/(?<=disclaimer:\\s)[\\s\\S]+?(?=\\nimage for intro:)/i\" {{lastMessage}} |\n/setvar key=disclaimer | /getvar index=0 disclaimer | /setvar key=disclaimer | /getvar index=0 disclaimer | /setvar key=disclaimer |\n\n/re-exec find=\"/(?<=image for intro:\\s)[\\s\\S]+?(?=\\n)/i\" {{lastMessage}} |\n/setvar key=imageintro | /getvar index=0 imageintro | /setvar key=imageintro | /getvar index=0 imageintro | /setvar key=imageintro |\n\n/re-exec find=\"/(?<=caption for intro:\\s)[\\s\\S]+?(?=\\nintro:)/i\" {{lastMessage}} |\n/setvar key=capintro | /getvar index=0 capintro | /setvar key=capintro | /getvar index=0 capintro | /setvar key=capintro |\n\n/re-exec find=\"/(?<=\\nintro:\\s)[\\s\\S]+?(?=\\nsubtopic \\d:)/i\" {{lastMessage}} |\n/setvar key=intro | /getvar index=0 intro | /setvar key=intro | /getvar index=0 intro | /setvar key=intro |\n\n/setvar key=i 1 |\n/times 3 {:\n\t/pass (?<=subtopic {{getvar::i}}:\\s)[\\s\\S]+?(?=\\n(quote\\|image\\|content body) for subtopic {{getvar::i}}:) |\n\t/re-exec find=/{{pipe}}/i {{lastMessage}} |\n\t/setvar key=subtopic{{getvar::i}} | /getvar index=0 subtopic{{getvar::i}}  | /setvar key=subtopic{{getvar::i}} | /getvar index=0 subtopic{{getvar::i}} | /setvar key=subtopic{{getvar::i}} |\n\t\n\t/pass (?<=quote for subtopic {{getvar::i}}:\\s)[\\s\\S]+?(?=\\ncontent body for subtopic {{getvar::i}}:) |\n\t/re-exec find=/{{pipe}}/i {{lastMessage}} |\n\t/setvar key=quote{{getvar::i}} | /getvar index=0 quote{{getvar::i}}  | /setvar key=quote{{getvar::i}} | /getvar index=0 quote{{getvar::i}} | /setvar key=quote{{getvar::i}} |\n\t\n\t/pass (?<=image for subtopic {{getvar::i}}:\\s)[\\s\\S]+?(?=\\ncaption for subtopic {{getvar::i}}:) |\n\t/re-exec find=/{{pipe}}/i {{lastMessage}} |\n\t/setvar key=image{{getvar::i}} | /getvar index=0 image{{getvar::i}}  | /setvar key=image{{getvar::i}} | /getvar index=0 image{{getvar::i}} | /setvar key=image{{getvar::i}} |\n\n\t/pass (?<=caption for subtopic {{getvar::i}}:\\s)[\\s\\S]+?(?=\\ncontent body for subtopic {{getvar::i}}:) |\n\t/re-exec find=/{{pipe}}/i {{lastMessage}} |\n\t/setvar key=cap{{getvar::i}} | /getvar index=0 cap{{getvar::i}}  | /setvar key=cap{{getvar::i}} | /getvar index=0 cap{{getvar::i}} | /setvar key=cap{{getvar::i}} |\n\t\n\t/add i 1 |\n\t/pass (?<=content body for subtopic {{getvar::i}}:\\s)[\\s\\S]+?(?=\\n(subtopic {{pipe}}\\|see also):) |\n\t/re-exec find=/{{pipe}}/i {{lastMessage}} |\n\t/setvar key=body{{getvar::i}} | /getvar index=0 body{{getvar::i}}  | /setvar key=body{{getvar::i}} | /getvar index=0 body{{getvar::i}} | /setvar key=body{{getvar::i}} |\n\n\t/addvar key=i 1\n:} |\n\n/re-exec find=\"/(?<=see also:\\s)[\\s\\S]+?(?=\\nreferences:)/i\" {{lastMessage}} |\n/setvar key=seealso | /getvar index=0 seealso | /setvar key=seealso | /getvar index=0 seealso | /setvar key=seealso |\n/re-replace find=/^-\\s/gmi replace=<li> {{getvar::seealso}} | /setvar key=seealso |\n/re-replace find=/$/gmi replace=</li> {{getvar::seealso}} | /setvar key=seealso |\n\n/re-exec find=\"/(?<=references:\\s)[\\s\\S]+?$/i\" {{lastMessage}} |\n/setvar key=refs | /getvar index=0 refs | /setvar key=refs | /getvar index=0 refs | /setvar key=refs |\n/re-replace find=/^-\\s/gmi replace=<li> {{getvar::refs}} | /setvar key=refs |\n/re-replace find=/$/gmi replace=</li> {{getvar::refs}} | /setvar key=refs","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":11,"showLabel":false,"label":"tohtml","title":"","message":"/setvar key=msg <div id=\"maincont\">\n\n\n<span class=\"title\">{{getvar::title}}</span>\n<hr class=\"header-border\">\n<div id=\"top\">\n\t<div class=\"gap-10\"><span class=\"underlined\">Article</span><span class=\"link\">Talk</span></div>\n\t\t<div class=\"gap-10\"><span class=\"underlined\">Read</span><span class=\"link\">View source</span><span class=\"link\">View history</span></div>\n\t</div>\n<hr class=\"header-border\"><br>\n  \nFrom Wikipedia, the free encyclopedia<br><br>\n  \n<div>\n\t<blockquote style=\"position:relative;display:flex;align-items:center;gap:5px;\" class=\"italic\" id=\"disclaimer\">\n\t\t<img id=\"emote\" src=\"http://localhost:8000/user/images/Wikipe-tan/{{getvar::emoteimg}}\" alt=\"emote\">\n\t\t<div style=\"color:black;position:absolute;top:70px;left:20px;\">\n\t\t\t{{getvar::signtext}}\n\t\t</div>\n\t\t<div>{{getvar::disclaimer}}</div>\n\t</blockquote>\n</div><br><br>\n\n<div class=\"content\">\n\t<div class=\"image-with-caption\"><img src=\"https://image.pollinations.ai/prompt/{{getvar::imageintro}}\" alt=\"introimage\"><blockquote>{{getvar::capintro}}</blockquote></div>\n\t{{getvar::intro}}\n</div> |\n\n/setvar key=i 1 |\n/times 3 {:\n\t/run varname=subtopic{{getvar::i}} creamsan.isvardefined |\n\t/if left={{pipe}} right=true rule=eq {:\n\t\t/getvar body{{getvar::i}} | /setvar key=body |\n\t\t/getvar subtopic{{getvar::i}} | /setvar key=subtopic |\n\t\t/setvar key=msg {{getvar::msg}}\n\n<span class=\"content-title\">{{getvar::subtopic}}</span>\n<hr class=\"header-border\">\n\n<div class=\"content\"> |\n\t\t\n\t\t/run varname=quote{{getvar::i}} creamsan.isvardefined |\n\t\t/if left={{pipe}} right=true rule=eq {:\n\t\t\t/getvar quote{{getvar::i}} | /setvar key=quote |\n\t\t\t/setvar key=msg {{getvar::msg}}\n\t<div class=\"quote\"><blockquote>{{getvar::quote}}</blockquote></div>\n\t\t:} |\n\t\t\n\t\t/run varname=image{{getvar::i}} creamsan.isvardefined |\n\t\t/if left={{pipe}} right=true rule=eq {:\n\t\t\t/getvar image{{getvar::i}} | /setvar key=img |\n\t\t\t/getvar cap{{getvar::i}} | /setvar key=caption |\n\t\t\t/setvar key=msg {{getvar::msg}}\n\t<div class=\"image-with-caption\"><img src=\"https://image.pollinations.ai/prompt/{{getvar::img}}\" alt=\"image\"><blockquote>{{getvar::caption}}</blockquote></div>\n\t\t:} |\n\t\n\t/setvar key=msg {{getvar::msg}}\n\t{{getvar::body}}\n</div>\n\n\t:} |\n\n\t/addvar key=i 1\n:} |\n\n/setvar key=msg {{getvar::msg}}\n\n<span class=\"content-title\">See also</span>\n<hr class=\"header-border\">\n<div class=\"see-also-content\">\n\t<ul>\n\t{{getvar::seealso}}\n\t</ul>\n</div> |\n\n/setvar key=msg {{getvar::msg}}\n\n<span class=\"content-title\">References</span>\n<hr class=\"header-border\">\n<div class=\"see-also-content\">\n\t<ul>\n\t{{getvar::refs}}\n\t</ul>\n</div>\n\n\n</div> |\n\n/pass <span class=\"link\"> |\n/re-replace find=/\\[\\[/gi replace={{pipe}} {{getvar::msg}} | /setvar key=msg |\n/re-replace find=/\\]\\]/gi replace=</span> {{getvar::msg}} | /setvar key=msg\n\n","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":15,"showLabel":false,"label":"makeoutput","title":"","message":"/setvar key=orig {{lastMessage}} |\n\n/cut {{lastMessageId}} |\n/sendas name={{char}} <details><summary>Original</summary>\n{{getvar::orig}}\n</details> |\n\n//cleanup |\n/re-replace find=/\\\\/gi replace={{noop}} {{getvar::msg}} |\n/sendas name={{char}} |\n/hide {{lastMessageId}}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""}],"idIndex":15}