{"version":2,"name":"websimai","disableSend":false,"placeBeforeInput":false,"injectInput":false,"color":"rgba(0, 0, 0, 0)","onlyBorderColor":false,"qrList":[{"id":2,"icon":"","showLabel":false,"label":"init","title":"","message":"/echo Initializing |\n\n/if left={{lastMessageId}} rule=neq right=0 {: /abort :} |\n\n/setvar key=pworldsaved false","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":4,"icon":"","showLabel":false,"label":"userprocess","title":"","message":"/setvar key=userinput {{input}} |\n\n/if left=pworldsaved rule=eq right=false else={:\n  /setvar key=world {{getvar::pworld}}\n:}\n{:\n  /setvar key=pworld {{getvar::world}} |\n  /setvar key=pworldsaved true\n:} |\n\n/run websimai.hastextform |\n/if left={{pipe}} rule=eq right=false {: /run websimai.debloathtml :} |\n\n/flushvar nadanada","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":6,"icon":"","showLabel":false,"label":"aiprocess","title":"","message":"/if left={{lastMessageId}} right=0 rule=eq {: /abort :} |\n\n/pass ... |\n/if left={{lastMessage}} rule=eq right={{pipe}} {: /abort :} |\n\n/run websimai.hastextform |\n/if left={{pipe}} rule=eq right=false {: /run websimai.debloathtml :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":true,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":8,"icon":"","showLabel":false,"label":"Send","title":"","message":"/run websimai.userprocess |\n\n/send {{getvar::userinput}}\n{{pipe}} |\n/trigger || /setinput","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":10,"icon":"","showLabel":false,"label":"debloathtml","title":"","message":"/re-replace find=/<style>[\\S\\s]+?<\\/style>\\|<(?!\\!--\\|\\/?thinking\\|\\/?meter\\|\\/?progress\\|\\/?data\\|\\/?a\\s\\|\\/?img)\\/?[\\S\\s]*?>\\|(?<=\\n)[^\\n\\S]+(?!\\n\\n[^\\s])/gi replace={{noop}} {{lastMessage}} | /setvar key=msg |\n\n/re-replace find=/(?<=<a[^\\n<]+?href=['\"][^\\n<]+?)['\"][\\S\\s]*?>/gmi replace=\"zz zz\" {{getvar::msg}} | /setvar key=msg |\n\n/re-replace find=/(?<=<img[^\\n<]+?src=['\"][^\\n<]+?)['\"][\\S\\s]*?>\\|<img[^\\n<]+?src=['\"]\\|<a[^\\n<]+?href=['\"]/gmi replace=\"zz zz\" {{getvar::msg}} | /setvar key=msg |\n\n/re-replace find=/zz/gmi replace={{noop}} {{getvar::msg}} | /setvar key=msg |\n\n/re-replace find=/(?<=[^\\n]\\n)\\n+\\|^\\s+\\|\\s+$/gi replace={{noop}} {{getvar::msg}} |\n\n/setvar key=msg <details>\n<summary>TEXT FORM</summary>\n{{pipe}}\n</details>\n\n|\n\n/sendas name=\"{{char}}\" |\n/sub {{lastMessageId}} 1 |\n/hide {{pipe}}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":16,"showLabel":false,"label":"-- debloathtml","title":"","message":"//legacy - this one uses the regex script |\n\n/flushvar toreplace |\n/setvar key=regexflags gi |\n\n/setvar key=regex <style>[\\S\\s]+?<\\/style>\\|<(?!\\!--\\|\\/?thinking\\|\\/?meter\\|\\/?progress\\|\\/?data\\|\\/?a \\|\\/?img)\\/?[\\S\\s]*?>\\|(?<=\\n)[^\\n\\S]+(?!\\n\\n[^\\s]) |\n/regex name=regexreplace {{lastMessage}} |\n/setvar key=msg |\n\n/setvar key=regexflags gmi |\n/setvar key=regex (?<=<a[^\\n<]+?href=['\"][^\\n<]+?)['\"][\\S\\s]*?> |\n/setvar key=toreplace zz zz |\n/regex name=regexreplace {{getvar::msg}} |\n/setvar key=msg |\n\n/setvar key=regex (?<=<img[^\\n<]+?src=['\"][^\\n<]+?)['\"][\\S\\s]*?>\\|<img[^\\n<]+?src=['\"]\\|<a[^\\n<]+?href=['\"] |\n/regex name=regexreplace {{getvar::msg}} |\n/setvar key=msg |\n\n/setvar key=regex zz |\n/flushvar toreplace |\n/regex name=regexreplace {{getvar::msg}} |\n/setvar key=msg |\n\n/setvar key=regexflags gi |\n/setvar key=regex (?<=[^\\n]\\n)\\n+\\|^\\s+\\|\\s+$ |\n/regex name=regexreplace {{getvar::msg}} |\n/setvar key=msg <details>\n<summary>TEXT FORM</summary>\n{{pipe}}\n</details>\n\n|\n\n/sendas name=\"{{char}}\" |\n/sub {{lastMessageId}} 1 |\n/hide {{pipe}}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":14,"icon":"","showLabel":false,"label":"hastextform","title":"","message":"/re-exec find=/(?<=<summary>)[\\S\\s]+?(?=</summary>)/i {{lastMessage}} | /setvar key=extracted |\n/getvar index=0 extracted | /setvar key=extracted | /getvar index=0 extracted |\n/if left={{pipe}} rule=in right=\"text form\" else={: /pass false :} {: /pass true :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":18,"showLabel":false,"label":"-- hastextform","title":"","message":"//legacy - this one uses the regex script |\n\n/setvar key=startregex <summary> |\n/setvar key=endregex </summary> |\n/setvar key=tomsgprocess {{lastMessage}} |\n/run creamsan.regextract |\n/if left={{pipe}} rule=in right=\"text form\" else={: /pass false :} {: /pass true :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""}],"idIndex":18}