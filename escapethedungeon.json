{
    "version": 2,
    "name": "escapethedungeon",
    "disableSend": false,
    "placeBeforeInput": false,
    "injectInput": false,
    "qrList": [
        {
            "id": 2,
            "label": "init",
            "title": "",
            "message": "/echo Initializing |\n/setvar key=firecolor #f5a33a |\n/setvar key=icecolor #6ecce4 |\n/setvar key=lightningcolor #f0d679 |\n/setvar key=neutralcolor #949494 |\n/setvar key=maxhp 10 |\n/setvar key=maxmp 10 |\n/setvar key=maxcond 15 |\n\n/setvar key=varname mage | /run creamsan.isvardefined |\n/if left={{pipe}} right=true rule=eq \"/abort\" |\n/buttons labels=[\"Fire\",\"Ice\",\"Lightning\",\"Chaos\"] Choose your mage companion. | /setvar key=mage |\n/setvar key=varname mage | /run creamsan.isvardefined |\n/if left={{pipe}} right=false rule=eq \"/setvar key=mage Chaos\" |\n/setvar key=element {{getvar::mage}} |\n/setvar key=tocolor {{getvar::mage}} |\n/run escapethedungeon.colorize |\n/setvar key=mage {{getvar::element}} |\n/if left=mage right=fire rule=in \"/setvar key=magename Lyra\" |\n/if left=mage right=ice rule=in \"/setvar key=magename Shiora\" |\n/if left=mage right=lightning rule=in \"/setvar key=magename Yara\" |\n/if left=mage right=chaos rule=in \"/setvar key=magename Kaela\" |\n\n/setvar key=hp 10 |\n/setvar key=mp 10 |\n/setvar key=killcount 0 |\n/setvar key=lweap index=name Rusty Iron Sword |\n/setvar key=lweap index=elem None |\n/setvar key=lweap index=cond 8 |\n/setvar key=rweap index=name Rusty Iron Sword |\n/setvar key=rweap index=elem None |\n/setvar key=rweap index=cond 8 |\n/setvar key=cooldown 2 |\n\n/getvar index=name lweap | /setvar key=tocolor |\n/getvar index=elem lweap | /setvar key=element |\n/run escapethedungeon.colorize | /setvar key=lweapname {{getvar::element}} |\n\n/getvar index=name rweap | /setvar key=tocolor |\n/getvar index=elem rweap | /setvar key=element |\n/run escapethedungeon.colorize | /setvar key=rweapname {{getvar::element}}",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 3,
            "label": "userprocess",
            "title": "",
            "message": "/run escapethedungeon.getinput |\n/addvar key=mp 1 | /min mp 10 | /setvar key=mp |\n/addvar key=hp 1 | /min hp 10 | /setvar key=hp |\n/if left=killcount right=16 rule=gte \"/setvar key=jbout They have finally escaped from the dungeon. No more monster encounters, but their story goes on. \\| /abort\" |\n/setvar key=jbout There's no monster or items for now. |\n/setvar key=tomsgprocess {{lastMessage}} |\n/run escapethedungeon.findrandomitem |\n/if left=cooldown right=0 rule=gt else=\"/run escapethedungeon.genmonster \\| /run escapethedungeon.genboss\" \"/addvar key=cooldown -1\" |\n /run escapethedungeon.getmonsterinfo |\n/if left=validmonsterinfo right=true rule=eq \"/run escapethedungeon.battleloop \\| /setvar key=cooldown {{random:0,1}}\" |\n/run escapethedungeon.getiteminfo |\n/if left=validiteminfo right=true rule=eq \"/run escapethedungeon.pickitem\" |\n/flushvar nadanada",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 4,
            "label": "aiprocess",
            "title": "",
            "message": "/if left={{lastMessageId}} right=0 rule=eq \"/abort\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": true,
            "executeOnChatChange": false
        },
        {
            "id": 6,
            "label": "Send",
            "title": "",
            "message": "/run escapethedungeon.userprocess |\n/send {{getvar::userinput}}{{newline}}{{pipe}} |\n/trigger | /flushvar nadanada | /setinput",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": false,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 9,
            "label": "getinput",
            "title": "",
            "message": "/setvar key=userinput {{input}}",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 10,
            "label": "genmonster",
            "title": "",
            "message": "/if left=killcount right=5 rule=eq \"/abort\" |\n/if left=killcount right=10 rule=eq \"/abort\" |\n/if left=killcount right=15 rule=eq \"/abort\" |\n/setvar key=jbout An enemy monster/mob approaches. Generate the monster/mob for the next response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: The monster/mob's name\nDescription: Its description\nFlavor text: \"Flavor text\"\nHP: Health points. Max health of 15\nImmunity: {{random: Fire, Ice, Lightning, None}}\nWeakness: Fire/Ice/Lightning/None. Select the most appropriate.\n```",
            "contextList": [],
            "preventAutoExecute": true,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 11,
            "label": "genboss",
            "title": "",
            "message": "/mod killcount 5 |\n/if left={{pipe}} right=0 rule=neq \"/abort\" |\n/if left=killcount right=0 rule=eq \"/abort\" |\n\n/if left=killcount right=5 rule=eq \"/setvar key=bosselem Fire\" |\n/if left=killcount right=10 rule=eq \"/setvar key=bosselem Ice\" |\n/if left=killcount right=15 rule=eq \"/setvar key=bosselem Lightning\" |\n/setvar key=jbout A(n) {{getvar::bosselem}} boss monster approaches. Generate the boss for the next response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: The boss' name\nDescription: Its description\nFlavor text: \"Flavor text\"\nHP: Health points. Max of 30\nImmunity: {{getvar::bosselem}}\nWeakness: Fire/Ice/Lightning/None. Select the most appropriate.\n```",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 12,
            "label": "getmonsterinfo",
            "title": "",
            "message": "/setvar key=validmonsterinfo true |\n\n/setvar key=startregex name\\s?[:\\-]\\s |\n/setvar key=endregex \\sdescription\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=monstername |\n/setvar key=varname monstername |\n/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n/if left=validmonsterinfo right=false rule=eq \"/abort\" |\n\n/setvar key=startregex description\\s?[:\\-]\\s |\n/setvar key=endregex \\sflavor text\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=monsterdesc |\n/setvar key=varname monsterdesc |\n/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n/if left=validmonsterinfo right=false rule=eq \"/abort\" |\n\n/setvar key=startregex flavor text\\s?[:\\-]\\s |\n/setvar key=endregex \\shp\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=monsterflavortext |\n/setvar key=varname monsterflavortext |\n/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n/if left=validmonsterinfo right=false rule=eq \"/abort\" |\n\n/setvar key=startregex hp\\s?[:\\-]\\s |\n/setvar key=endregex \\simmunity\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=monsterhp |\n/setvar key=varname monsterhp |\n/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n/if left=validmonsterinfo right=false rule=eq \"/abort\" |\n\n/setvar key=startregex immunity\\s?[:\\-]\\s |\n/setvar key=endregex \\sweakness\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=monsterimmunity |\n/setvar key=varname monsterimmunity |\n/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n/if left=validmonsterinfo right=false rule=eq \"/abort\" |\n\n/setvar key=startregex weakness\\s?[:\\-]\\s |\n/setvar key=endregex \\s(?<=weakness\\s?[:\\-][\\S\\s]+)``` |\n/run creamsan.regextract | /setvar key=monsterweakness |\n/setvar key=varname monsterweakness |\n/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n/if left=validmonsterinfo right=false rule=eq \"/abort\" |\n\n/if left=validmonsterinfo right=true rule=eq \"/setvar key=newmonstergen true\" |\n\n/setvar key=element {{getvar::monsterimmunity}} |\n/setvar key=tocolor {{getvar::monsterimmunity}} |\n/run escapethedungeon.colorize |\n/setvar key=monsterimmunitydisp {{getvar::element}} |\n\n/setvar key=element {{getvar::monsterweakness}} |\n/setvar key=tocolor {{getvar::monsterweakness}} |\n/run escapethedungeon.colorize |\n/setvar key=monsterweaknessdisp {{getvar::element}}",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 13,
            "label": "battle",
            "title": "",
            "message": "/if left=newmonstergen right=true rule=eq \"/setvar key=maxmonsterhp {{getvar::monsterhp}} \\| /setvar key=newmonstergen false\" |\n/div monsterhp maxmonsterhp | /mul {{pipe}} 100 | /setvar key=monsterhpbar |\n\n/div hp maxhp | /mul {{pipe}} 100 | /setvar key=hpbar |\n\n/div mp maxmp | /mul {{pipe}} 100 | /setvar key=mpbar |\n\n/getvar index=cond lweap |\n/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=lweapbar |\n\n/getvar index=cond rweap |\n/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=rweapbar |\n\n/buttons labels=[\"LeftAttack\",\"RightAttack\",\"CompanionAttack\",\"Kick\"] <h3>üíÄ Time to fight! Choose an action. ‚öîÔ∏è</h3>\n\n<div style='display: flex; justify-content: center; gap: 2px; text-align: left'>\n\n<div style='width: 50%; border-radius: 3px; border: 1px solid green; padding: 3px'>\n\n  <b>Party</b>\n  <div style='display: flex; align-items: center; gap: 3px'>\n      <b>HP:</b><div style='width: 70px; height: 8px; border: 1px solid grey'><div style='background-color: red; height: 100%; width: {{getvar::hpbar}}%'></div></div>\n  </div><br><br>\n\n  Your weapons<br>\n  <div style='display: flex; align-items: center; gap: 3px'>\n    L: {{getvar::lweapname}} <div style='width: 30px; height: 8px; border: 1px solid grey'><div style='background-color: grey; height: 100%; width: {{getvar::lweapbar}}%'></div></div>\n  </div><br>\n  <div style='display: flex; align-items: center; gap: 3px'>\n    R: {{getvar::rweapname}} <div style='width: 30px; height: 8px; border: 1px solid grey'><div style='background-color: grey; height: 100%; width: {{getvar::rweapbar}}%'></div></div>\n  </div><br><br>\n\n  {{getvar::magename}}<br>\n  Magic: {{getvar::mage}}<br>\n  <div style='display: flex; align-items: center; gap: 3px'>\n    MP:<div style='width: 70px; height: 8px; border: 1px solid grey'><div style='background-color: blue; height: 100%; width: {{getvar::mpbar}}%'></div></div>\n  </div>\n</div>\n\n<div style='width: 50%; border-radius: 3px; border: 1px solid red; padding: 3px'>\n\n  <b>{{getvar::monstername}}</b>\n  <div style='display: flex; align-items: center; gap: 3px'>\n    <b>HP:</b> <div style='width: 70px; height: 8px; border: 1px solid grey'><div style='background-color: red; height: 100%; width: {{getvar::monsterhpbar}}%'></div></div>\n  </div><br><br>\n  \n  {{getvar::monsterdesc}}<br>\n  <font color=yellowgreen>{{getvar::monsterflavortext}}</font><br>\n  Immune to {{getvar::monsterimmunitydisp}}<br>\n  Weak to {{getvar::monsterweaknessdisp}}<br>\n  \n</div>\n\n</div>\n<br><br>\n\n<div style='text-align: left; font-size: 10px'>\n  <div style='color: grey'><b>LeftAttack:</b> Attack with your left weapon</div>\n  <div style='color: grey'><b>RightAttack:</b> Attack with your right weapon</div>\n  <div style='color: grey'><b>CompanionAttack:</b> Let your companion attack</div>\n  <div style='color: grey'><b>Kick:</b> Attack without losing mana or weapon condition, but risk taking damage.</div>\n  <div style='color: grey'>Element colors: <font color={{getvar:: firecolor}}>FIRE</font>, <font color={{getvar::icecolor}}>ICE</font>, <font color={{getvar::lightningcolor}}>LIGHTNING</font>, <font color={{getvar::neutralcolor}}>NONE</font></div>\n</div> |\n\n/setvar key=action |\n/setvar key=varname action |\n/run creamsan.isvardefined |\n/if left={{pipe}} right=true rule=neq \"/run escapethedungeon.takedmg\" |\n/if left=action right=Kick rule=eq \"/run escapethedungeon.kick\" |\n/if left=action right=LeftAttack rule=eq \"/run escapethedungeon.weapattack\" |\n/if left=action right=RightAttack rule=eq \"/run escapethedungeon.weapattack\" |\n/if left=action right=CompanionAttack rule=eq \"/run escapethedungeon.companionattack\" |\n/if left=hp right=0 rule=lte \"/run escapethedungeon.gameover \\| /setvar key=looping false\" |\n/if left=monsterhp right=0 rule=lte \"/run escapethedungeon.winbattle \\| /setvar key=looping false\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 14,
            "label": "battleloop",
            "title": "",
            "message": "/setvar key=looping true |\n/while left=looping right=true rule=eq \"/run escapethedungeon.battle\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 15,
            "label": "kick",
            "title": "",
            "message": "/addvar key=monsterhp -1 | /echo You kick the monster. |\n/setvar key=lasthit Good ol' kick |\n/pass {{roll: d2}} |\n/if left={{pipe}} right=1 rule=lte \"/run escapethedungeon.takedmg\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 16,
            "label": "weapattack",
            "title": "",
            "message": "/if left=action right=LeftAttack rule=eq else=\"/setvar key=weap rweap\" \"/setvar key=weap lweap\" |\n/getvar index=name {{getvar::weap}} | /setvar key=weapname |\n/getvar index=elem {{getvar::weap}} | /setvar key=weapelem |\n/getvar index=cond {{getvar::weap}} | /setvar key=weapcond |\n/if left=weapcond right=0 rule=lte else=\"/addvar key=weapcond -1 \\| /setvar key=atkelem {{getvar::weapelem}} \\| /setvar key=lasthit {{user}}'s weapon: {{getvar::weapname}}, enchanted with {{getvar::weapelem}} \\| /run escapethedungeon.monsterdmg\" \"/echo This weapon is broken.\" |\n/setvar key={{getvar::weap}} index=cond {{getvar::weapcond}} |\n/flushvar weap",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 17,
            "label": "companionattack",
            "title": "",
            "message": "/if left=mage right=Chaos rule=in else=\"/setvar key=atkelem {{getvar::mage}}\" \"/setvar key=atkelem {{random: fire, ice, lightning}}\" |\n/if left=mp right=0 rule=lte else=\"/addvar key=mp -1 \\| /run escapethedungeon.monsterdmg \\| /setvar key=lasthit {{getvar::magename}}'s {{getvar::atkelem}} magic\" \"/echo She has no more mana.\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 18,
            "label": "takedmg",
            "title": "",
            "message": "/addvar key=hp -1 | /echo severity=warning The monster hits you. |\n/max 0 hp | /setvar key=hp",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 19,
            "label": "monsterdmg",
            "title": "",
            "message": "/echo You attack the monster. |\n/setvar key=dmg 1 |\n/if left=atkelem right=none rule=in \"/setvar key=atkelem physical\" |\n/if left=atkelem right=monsterweakness rule=in \"/addvar key=dmg 3 \\| /echo severity=success That attack was super effective.\" |\n/if left=atkelem right=monsterimmunity rule=in \"/setvar key=dmg 0 \\| /echo severity=warning That attack had no effect.\" |\n/addvar key=monsterhp -{{getvar::dmg}} |\n/max monsterhp 0 | /setvar key=monsterhp",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 20,
            "label": "colorize",
            "title": "",
            "message": "/if left={{getvar::element}} right=fire rule=in \"/setvar key=element <font color={{getvar::firecolor}}>{{getvar::tocolor}}üî•</font>\" |\n/if left={{getvar::element}} right=ice rule=in \"/setvar key=element <font color={{getvar::icecolor}}>{{getvar::tocolor}}‚ùÑÔ∏è</font>\" |\n/if left={{getvar::element}} right=lightning rule=in \"/setvar key=element <font color={{getvar::lightningcolor}}>{{getvar::tocolor}}‚ö°</font>\" |\n/if left={{getvar::element}} right=none rule=in \"/setvar key=element <font color={{getvar::neutralcolor}}>{{getvar::tocolor}}üëä</font>\" |\n/if left={{getvar::element}} right=chaos rule=in \"/setvar key=element <font color=#a17be5>{{getvar::tocolor}}üé≤</font>\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 21,
            "label": "winbattle",
            "title": "",
            "message": "/echo severity=success You win! |\n/addvar key=killcount 1 |\n/if left=killcount right=16 rule=gte else=\"/run escapethedungeon.genitem\" \"/run escapethedungeon.showendingpopup\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 22,
            "label": "gameover",
            "title": "",
            "message": "/echo severity=error You lose. Game over. |\n/setvar key=jbout Describe the next scene vividly: The duo has lost the battle against {{getvar::monstername}}, and more monsters come to surround them. {{user}}, weakened as he is, is pinned to the ground while {{getvar::magename}} is held down. The monsters tear off her clothes and begin to rape her, this is the last scene {{user}} sees before he is knocked out and killed. Game over.",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 23,
            "label": "genitem",
            "title": "",
            "message": "/setvar key=jbout The duo defeated {{getvar::monstername}}. The attack that killed it: {{getvar::lasthit}}. They looted the monster and found {{random::a health potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Health potion\nType: Potion\nDescription: Its description\n```::a mana potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Mana potion\nType: Potion\nDescription: Its description\n```::a weapon. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the weapon\nType: Weapon\nDescription: Its description\nEnchantment: Choose one: Fire/Ice/Lightning/None\nCondition: Its current condition from 1 to 15, where 15 is pristine condition. Although these are rare, most common is around 6 to 12\n```::a collectible. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the item\nType: Collectible\nDescription: Its description. Valuable, but useless in battle.\n```::nothing.::nothing.::nothing.::nothing.}}",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 24,
            "label": "getiteminfo",
            "title": "",
            "message": "/setvar key=validiteminfo true |\n\n/setvar key=startregex name\\s?[:\\-]\\s |\n/setvar key=endregex \\stype\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=itemname |\n/setvar key=varname itemname |\n/run creamsan.isvardefined | /setvar key=validiteminfo |\n/if left=validiteminfo right=false rule=eq \"/abort\" |\n\n/setvar key=startregex type\\s?[:\\-]\\s |\n/setvar key=endregex \\sdescription\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=itemtype |\n/setvar key=varname itemtype |\n/run creamsan.isvardefined | /setvar key=validiteminfo |\n/if left=validiteminfo right=false rule=eq \"/abort\" |\n\n/setvar key=startregex description\\s?[:\\-]\\s |\n/setvar key=endregex \\s(?<=description\\s?[:\\-][\\S\\s]+)``` |\n/run creamsan.regextract | /setvar key=itemdesc |\n/setvar key=varname itemdesc |\n/run creamsan.isvardefined | /setvar key=validiteminfo",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 25,
            "label": "pickitem",
            "title": "",
            "message": "/if left=itemtype right=pot rule=in \"/run escapethedungeon.usepotion\" |\n/if left=itemtype right=weap rule=in \"/run escapethedungeon.equiploop\" |\n/if left=itemtype right=collect rule=in \"/run escapethedungeon.pickcollectible\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 26,
            "label": "equipweap",
            "title": "",
            "message": "/getvar index=cond lweap |\n/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=lweapbar |\n\n/getvar index=cond rweap |\n/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=rweapbar |\n\n/setvar key=startregex enchantment\\s?[:\\-]\\s |\n/setvar key=endregex \\scondition\\s?[:\\-]\\s |\n/run creamsan.regextract | /setvar key=itemelem |\n\n/setvar key=startregex condition\\s?[:\\-]\\s |\n/setvar key=endregex \\s(?<=condition\\s?[:\\-][\\S\\s]+)``` |\n/run creamsan.regextract | /setvar key=itemcond |\n\n/setvar key=tocolor {{getvar::itemname}} |\n/setvar key=element {{getvar::itemelem}} |\n/run escapethedungeon.colorize | /setvar key=itemnamedisp {{getvar::element}} |\n\n/div itemcond maxcond | /setvar key=itembar |\n/mul {{getvar::itembar}} 100 | /setvar key=itembar |\n\n/buttons labels=[\"EquipLeft\",\"EquipRight\"] <h3>üó°Ô∏è You found a weapon! Cancel to discard. üî´</h3>\n\n<div style='display: flex; justify-content: center; gap: 2px; text-align: left'>\n\n<div style='width: 50%; border-radius: 3px; border: 1px solid green; padding: 3px'>\n\n  Your weapons<br>\n  <div style='display: flex; align-items: center; gap: 3px'>\n    L: {{getvar::lweapname}} <div style='width: 30px; height: 8px; border: 1px solid grey'><div style='background-color: grey; height: 100%; width: {{getvar::lweapbar}}%'></div></div>\n  </div><br>\n  <div style='display: flex; align-items: center; gap: 3px'>\n    R: {{getvar::rweapname}} <div style='width: 30px; height: 8px; border: 1px solid grey'><div style='background-color: grey; height: 100%; width: {{getvar::rweapbar}}%'></div></div>\n  </div><br><br>\n\n</div>\n\n<div style='width: 50%; border-radius: 3px; border: 1px solid aqua; padding: 3px'>\n\n  NEW!<br>\n  <div style='display: flex; align-items: center; gap: 3px'>\n    {{getvar::itemnamedisp}} <div style='width: 30px; height: 8px; border: 1px solid grey'><div style='background-color: grey; height: 100%; width: {{getvar::itembar}}%'></div></div>\n  </div><br><br>\n  \n  {{getvar::itemdesc}}\n  \n</div>\n\n</div><br><br> |\n\n/setvar key=action |\n/setvar key=varname action | /run creamsan.isvardefined |\n/if left={{pipe}} right=false rule=eq \"/setvar key=action empty\" |\n\n/if left=action right=toconfirm rule=neq \"/echo Click again to confirm. \\| /setvar key=toconfirm {{getvar::action}} \\| /abort\" |\n\n/if left=action right=empty rule=neq else=\"/echo Discarded weapon.\" \"/run escapethedungeon.selectweap\" |\n/setvar key=looping false |\n/flushvar toconfirm",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 27,
            "label": "equiploop",
            "title": "",
            "message": "/setvar key=looping true |\n/while left=looping right=true rule=eq \"/run escapethedungeon.equipweap\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 28,
            "label": "selectweap",
            "title": "",
            "message": "/if left=action right=EquipLeft rule=eq else=\"/setvar key=weap rweap\" \"/setvar key=weap lweap\" |\n\n/setvar index=name key={{getvar::weap}} {{getvar::itemname}} |\n/setvar index=elem key={{getvar::weap}} {{getvar::itemelem}} |\n/setvar index=cond key={{getvar::weap}} {{getvar::itemcond}} |\n\n/getvar index=name {{getvar::weap}} | /setvar key=tocolor |\n/getvar index=elem {{getvar::weap}} | /setvar key=element |\n/run escapethedungeon.colorize | /setvar key={{getvar::weap}}name {{getvar::element}} |\n\n/echo severity=success Equipped new weapon! |\n/flushvar weap",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 29,
            "label": "usepotion",
            "title": "",
            "message": "/if left=itemname right=heal rule=in \"/echo severity=success Restored some HP. \\| /addvar key=hp 3 \\| /min hp maxhp \\| /setvar key=hp\" |\n\n/if left=itemname right=mana rule=in \"/echo severity=success Restored some MP. \\| /addvar key=mp 3 \\| /min mp maxmp \\| /setvar key=mp\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 30,
            "label": "pickcollectible",
            "title": "",
            "message": "/createentry file=\"Escape the Dungeon\" key=\"{{getvar::itemname}}\" Name: {{getvar::itemname}}\nType: Collectible Item\nDescription: {{getvar::itemdesc}} |\n/findentry file=\"Escape the Dungeon\" {{getvar::itemname}} | /setvar key=uid | /setentryfield file=\"Escape the Dungeon\" uid={{getvar::uid}} field=position 3 |\n/echo severity=success Picked up {{getvar::itemname}}",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 31,
            "label": "showendingpopup",
            "title": "",
            "message": "/if left=mage right=fire rule=in \"/setvar key=imglink https://files.catbox.moe/zophfs.png\" |\n/if left=mage right=lightning rule=in \"/setvar key=imglink https://files.catbox.moe/wpl6x0.png\" |\n/if left=mage right=chaos rule=in \"/setvar key=imglink https://files.catbox.moe/g3kiqz.png\" |\n/if left=mage right=ice rule=in \"/setvar key=imglink https://files.catbox.moe/hj2yzu.png\" |\n\n/setvar key=jbout The way out is in sight, the final boss monster defeated. They have finally reached the end. |\n/popup <h1>Congratulations</h1>\n<font color=red><img style='width: 300px' src='{{getvar::imglink}}' alt='Image loading failed :('></font><br><br>\nYou have escaped the dungeon.<br><br>\n<hr><br><br>\nHave some SD slop. Yeah lol, sorry, not the greatest image proompter.<br>\nThanks for playing. If you've made it this far, it means the script is working as intended, I really hope so. If you encountered any problems, please let me know. Upcoming updates will probably just be bug fixes or balancing, as I don't want to add any more features.<br>\nFrom this point on you should use the normal send button on the right instead of the QR send button.<br>\nAlso, check the lorebook for items you've collected along the way. Maybe you can make use of them for your ongoing story.<br>\nThat's all, for now. Again, thank you, {{user}}.<br><br>\n<hr><br><br>",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        },
        {
            "id": 32,
            "label": "findrandomitem",
            "title": "",
            "message": "/pass {{roll: d6}} |\n/if left={{pipe}} right=1 rule=eq \"/setvar key=jbout While exploring the dungeon, the duo randomly finds {{random::a health potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Health potion\nType: Potion\nDescription: Its description\n```::a mana potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Mana potion\nType: Potion\nDescription: Its description\n```::a weapon. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the weapon\nType: Weapon\nDescription: Its description\nEnchantment: Choose one: Fire/Ice/Lightning/None.\nCondition: Its current condition from 1 to 15, where 15 is pristine condition. Although these are rare, most common is around 6 to 12.\n```::a collectible. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the item\nType: Collectible\nDescription: Its description. Valuable, but useless in battle.\n```}}\"",
            "contextList": [],
            "preventAutoExecute": false,
            "isHidden": true,
            "executeOnStartup": false,
            "executeOnUser": false,
            "executeOnAi": false,
            "executeOnChatChange": false
        }
    ],
    "idIndex": 0
}