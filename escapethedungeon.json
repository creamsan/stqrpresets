{"version":2,"name":"escapethedungeon","disableSend":false,"placeBeforeInput":false,"injectInput":false,"color":"rgba(0, 0, 0, 0)","onlyBorderColor":false,"qrList":[{"id":2,"icon":"","showLabel":false,"label":"init","title":"","message":"/echo Initializing |\n/setvar key=varname mage | /run creamsan.isvardefined |\n/if left={{pipe}} right=true rule=eq {: /abort :} |\n\n/setvar key=firecolor #f5a33a |\n/setvar key=icecolor #6ecce4 |\n/setvar key=lightningcolor #f0d679 |\n/setvar key=neutralcolor #949494 |\n/setvar key=maxhp 10 |\n/setvar key=maxmp 10 |\n/setvar key=maxcond 15 |\n\n/buttons labels=[\"Fire\",\"Ice\",\"Lightning\",\"Chaos\"] Choose your mage companion. | /setvar key=mage |\n/setvar key=varname mage | /run creamsan.isvardefined |\n/if left={{pipe}} right=false rule=eq \"/setvar key=mage Chaos\" |\n/setvar key=element {{getvar::mage}} |\n/setvar key=tocolor {{getvar::mage}} |\n/run escapethedungeon.colorize |\n/setvar key=mage {{getvar::element}} |\n/if left=mage right=fire rule=in {: /setvar key=magename Lyra :} |\n/if left=mage right=ice rule=in {: /setvar key=magename Shiora :} |\n/if left=mage right=lightning rule=in {: /setvar key=magename Yara :} |\n/if left=mage right=chaos rule=in {: /setvar key=magename Kaela :} |\n\n/run escapethedungeon.regengreet |\n\n/setvar key=hp 10 |\n/setvar key=mp 10 |\n/setvar key=killcount 0 |\n/setvar key=lweap index=name Rusty Iron Sword |\n/setvar key=lweap index=elem None |\n/setvar key=lweap index=cond 8 |\n/setvar key=rweap index=name Rusty Iron Sword |\n/setvar key=rweap index=elem None |\n/setvar key=rweap index=cond 8 |\n/setvar key=cooldown 2 |\n\n/getvar index=name lweap | /setvar key=tocolor |\n/getvar index=elem lweap | /setvar key=element |\n/run escapethedungeon.colorize | /setvar key=lweapname {{getvar::element}} |\n\n/getvar index=name rweap | /setvar key=tocolor |\n/getvar index=elem rweap | /setvar key=element |\n/run escapethedungeon.colorize | /setvar key=rweapname {{getvar::element}}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":4,"icon":"","showLabel":false,"label":"userprocess","title":"","message":"/let genmonster {:\n\t/if left=killcount right=5 rule=eq {: /break :} |\n\t/if left=killcount right=10 rule=eq {: /break :} |\n\t/if left=killcount right=15 rule=eq {: /break :} |\n\t/setvar key=jbout An enemy monster/mob approaches. Generate the monster/mob for the next response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: The monster/mob's name\nDescription: Its description\nFlavor text: \"Flavor text\"\nHP: Health points. Max health of 20\nImmunity: {{random: Fire, Ice, Lightning, None}}\nWeakness: Fire/Ice/Lightning/None. Select the most appropriate.\n```\n:} |\n\n\n/let genboss {:\n\t/mod killcount 5 |\n\t/if left={{pipe}} right=0 rule=neq {: /break :} |\n\t/if left=killcount right=0 rule=eq {: /break :} |\n\t\n\t/if left=killcount right=5 rule=eq {: /setvar key=bosselem Fire :} |\n\t/if left=killcount right=10 rule=eq {: /setvar key=bosselem Ice :} |\n\t/if left=killcount right=15 rule=eq {: /setvar key=bosselem Lightning :} |\n\t/setvar key=jbout A(n) {{getvar::bosselem}} boss monster approaches. Generate the boss for the next response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: The boss' name\nDescription: Its description\nFlavor text: \"Flavor text\"\nHP: Health points. Max of 50\nImmunity: {{getvar::bosselem}}\nWeakness: Fire/Ice/Lightning/None. Select the most appropriate.\n```\n:} |\n\n\n/let getmonsterinfo {:\n\t/setvar key=validmonsterinfo true |\n\t/setvar key=endregex (\\n[\\S\\s]+?[:\\-]\\s\\|\\n(?<=[\\S\\s]+?[:\\-][\\S\\s]+)```) |\n\t\n\t/setvar key=startregex name\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=monstername |\n\t/setvar key=varname monstername |\n\t/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n\t/if left=validmonsterinfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex description\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=monsterdesc |\n\t/setvar key=varname monsterdesc |\n\t/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n\t/if left=validmonsterinfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex flavor text\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=monsterflavortext |\n\t/setvar key=varname monsterflavortext |\n\t/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n\t/if left=validmonsterinfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex hp\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=monsterhp |\n\t/setvar key=varname monsterhp |\n\t/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n\t/if left=validmonsterinfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex immunity\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=monsterimmunity |\n\t/setvar key=varname monsterimmunity |\n\t/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n\t/if left=validmonsterinfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex weakness\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=monsterweakness |\n\t/setvar key=varname monsterweakness |\n\t/run creamsan.isvardefined | /setvar key=validmonsterinfo |\n\t/if left=validmonsterinfo right=false rule=eq {: /break :} |\n\t\n\t/if left=validmonsterinfo right=true rule=eq {: /setvar key=newmonstergen true :} |\n\t\n\t/setvar key=element {{getvar::monsterimmunity}} |\n\t/setvar key=tocolor {{getvar::monsterimmunity}} |\n\t/run escapethedungeon.colorize |\n\t/setvar key=monsterimmunitydisp {{getvar::element}} |\n\t\n\t/setvar key=element {{getvar::monsterweakness}} |\n\t/setvar key=tocolor {{getvar::monsterweakness}} |\n\t/run escapethedungeon.colorize |\n\t/setvar key=monsterweaknessdisp {{getvar::element}}\n:} |\n\n\n/let getiteminfo {:\n\t/setvar key=validiteminfo true |\n\t/setvar key=endregex (\\n[\\S\\s]+?[:\\-]\\s\\|\\n(?<=[\\S\\s]+?[:\\-][\\S\\s]+)```) |\n\t\n\t/setvar key=startregex name\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=itemname |\n\t/setvar key=varname itemname |\n\t/run creamsan.isvardefined | /setvar key=validiteminfo |\n\t/if left=validiteminfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex type\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=itemtype |\n\t/setvar key=varname itemtype |\n\t/run creamsan.isvardefined | /setvar key=validiteminfo |\n\t/if left=validiteminfo right=false rule=eq {: /break :} |\n\t\n\t/setvar key=startregex description\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=itemdesc |\n\t/setvar key=varname itemdesc |\n\t/run creamsan.isvardefined | /setvar key=validiteminfo\n:} |\n\n\n/setvar key=userinput {{input}} |\n\n/addvar key=mp 1 | /min mp 10 | /setvar key=mp |\n/addvar key=hp 1 | /min hp 10 | /setvar key=hp |\n\n/if left=killcount right=16 rule=gte {:\n  /setvar key=jbout They have finally escaped from the dungeon. No more monster encounters, but their story goes on. | /echo It's over. Use the normal Send button. | /abort\n:} |\n\n/setvar key=jbout There's no monster or items for now. |\n/setvar key=tomsgprocess {{lastMessage}} |\n\n/run escapethedungeon.findrandomitem |\n/if left=cooldown right=0 rule=gt else={:\n  /run genmonster |\n  /run genboss\n:}\n{:\n  /addvar key=cooldown -1\n:} |\n\n/run getmonsterinfo |\n/if left=validmonsterinfo right=true rule=eq {:\n  /run escapethedungeon.battleloop |\n  /setvar key=cooldown {{random:0,1}}\n:} |\n\n/run getiteminfo |\n/if left=validiteminfo right=true rule=eq {: /run escapethedungeon.pickitem :} |\n\n/flushvar nadanada","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":6,"icon":"","showLabel":false,"label":"aiprocess","title":"","message":"/if left={{lastMessageId}} right=0 rule=eq {: /abort :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":true,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":8,"icon":"","showLabel":false,"label":"Send","title":"","message":"/run escapethedungeon.userprocess |\n/send {{getvar::userinput}}\n{{pipe}} |\n/trigger || /setinput","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":16,"icon":"","showLabel":false,"label":"battle","title":"","message":"/if left=newmonstergen right=true rule=eq {:\n  /setvar key=maxmonsterhp {{getvar::monsterhp}} |\n  /setvar key=newmonstergen false\n:} |\n/div monsterhp maxmonsterhp | /mul {{pipe}} 100 | /setvar key=monsterhpbar |\n\n/div hp maxhp | /mul {{pipe}} 100 | /setvar key=hpbar |\n\n/div mp maxmp | /mul {{pipe}} 100 | /setvar key=mpbar |\n\n/getvar index=cond lweap |\n/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=lweapbar |\n\n/getvar index=cond rweap |\n/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=rweapbar |\n\n/buttons labels=[\"LeftAttack\",\"RightAttack\",\"CompanionAttack\",\"Kick\"] <div>\n<style>.weapbar{width: 30px; height: 8px; border: 1px solid grey} .ui{width: 50%; border-radius: 3px; padding: 3px} .namebar{display: flex; align-items: center; gap: 3px} .vitbar{width: 70px; height: 8px; border: 1px solid grey}</style>\n\n<h3>üíÄ Time to fight! Choose an action. ‚öîÔ∏è</h3>\n\n<div style='display: flex; justify-content: center; gap: 2px; text-align: left'>\n\n<div class='ui' style='border: 1px solid green'>\n\n  <b>Party</b>\n  <div class='namebar'>\n      <b>HP:</b><div class='vitbar'><div style='background-color: red; height: 100%; width: {{getvar::hpbar}}%'></div></div>\n  </div><br><br>\n\n  Your weapons<br>\n  <div class='namebar'>\n    L: {{getvar::lweapname}} <div class='weapbar'><div style='background-color: grey; height: 100%; width: {{getvar::lweapbar}}%'></div></div>\n  </div><br>\n  <div class='namebar'>\n    R: {{getvar::rweapname}} <div class='weapbar'><div style='background-color: grey; height: 100%; width: {{getvar::rweapbar}}%'></div></div>\n  </div><br><br>\n\n  {{getvar::magename}}<br>\n  Magic: {{getvar::mage}}<br>\n  <div class='namebar'>\n    MP:<div class='vitbar'><div style='background-color: blue; height: 100%; width: {{getvar::mpbar}}%'></div></div>\n  </div>\n</div>\n\n<div class='ui' style='border: 1px solid red'>\n\n  <b>{{getvar::monstername}}</b>\n  <div class='namebar'>\n    <b>HP:</b> <div class='vitbar'><div style='background-color: red; height: 100%; width: {{getvar::monsterhpbar}}%'></div></div>\n  </div><br><br>\n  \n  {{getvar::monsterdesc}}<br>\n  <font color=yellowgreen>{{getvar::monsterflavortext}}</font><br>\n  Immune to {{getvar::monsterimmunitydisp}}<br>\n  Weak to {{getvar::monsterweaknessdisp}}<br>\n  \n</div>\n\n</div>\n<br><br>\n\n<div style='text-align: left; font-size: 10px'>\n  <div style='color: grey'><b>LeftAttack:</b> Attack with your left weapon</div>\n  <div style='color: grey'><b>RightAttack:</b> Attack with your right weapon</div>\n  <div style='color: grey'><b>CompanionAttack:</b> Let your companion attack</div>\n  <div style='color: grey'><b>Kick:</b> Attack without losing mana or weapon condition, but risk taking damage.</div>\n  <div style='color: grey'>Element colors: <font color={{getvar:: firecolor}}>FIRE</font>, <font color={{getvar::icecolor}}>ICE</font>, <font color={{getvar::lightningcolor}}>LIGHTNING</font>, <font color={{getvar::neutralcolor}}>NONE</font></div>\n</div>\n</div> |\n\n/setvar key=action |\n/setvar key=varname action |\n/run creamsan.isvardefined |\n/if left={{pipe}} right=true rule=neq {: /run escapethedungeon.takedmg :} |\n/if left=action right=Kick rule=eq {: /run escapethedungeon.kick :} |\n/if left=action right=LeftAttack rule=eq {: /run escapethedungeon.weapattack :} |\n/if left=action right=RightAttack rule=eq {: /run escapethedungeon.weapattack :} |\n/if left=action right=CompanionAttack rule=eq {: /run escapethedungeon.companionattack :} |\n/if left=hp right=0 rule=lte {:\n  /run escapethedungeon.gameover |\n  /setvar key=looping false\n:} |\n/if left=monsterhp right=0 rule=lte {:\n  /run escapethedungeon.winbattle |\n  /setvar key=looping false\n:}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":18,"icon":"","showLabel":false,"label":"battleloop","title":"","message":"/setvar key=looping true |\n/while left=looping right=true rule=eq {: /run escapethedungeon.battle :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":20,"icon":"","showLabel":false,"label":"kick","title":"","message":"/addvar key=monsterhp -1 | /echo You kick the monster. |\n/setvar key=lasthit Good ol' kick |\n/pass {{roll: d2}} |\n/if left={{pipe}} right=1 rule=lte {: /run escapethedungeon.takedmg :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":22,"icon":"","showLabel":false,"label":"weapattack","title":"","message":"/if left=action right=LeftAttack rule=eq else={: /setvar key=weap rweap :} {: /setvar key=weap lweap :} |\n/getvar index=name {{getvar::weap}} | /setvar key=weapname |\n/getvar index=elem {{getvar::weap}} | /setvar key=weapelem |\n/getvar index=cond {{getvar::weap}} | /setvar key=weapcond |\n\n/if left=weapcond right=0 rule=lte else={:\n  /addvar key=weapcond -1 |\n  /setvar key=atkelem {{getvar::weapelem}} |\n  /setvar key=lasthit {{user}}'s weapon: {{getvar::weapname}}, enchanted with {{getvar::weapelem}} |\n  /run escapethedungeon.monsterdmg\n:}\n{:\n  /echo This weapon is broken.\n:} |\n\n/setvar key={{getvar::weap}} index=cond {{getvar::weapcond}} |\n\n/flushvar weap","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":24,"icon":"","showLabel":false,"label":"companionattack","title":"","message":"/if left=mage right=Chaos rule=in else={: /setvar key=atkelem {{getvar::mage}} :} {: /setvar key=atkelem {{random: fire, ice, lightning}} :} |\n\n/if left=mp right=0 rule=lte else={:\n  /addvar key=mp -1 |\n  /run escapethedungeon.monsterdmg |\n  /setvar key=lasthit {{getvar::magename}}'s {{getvar::atkelem}} magic\n:}\n{:\n  /echo She has no more mana.\n:}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":26,"icon":"","showLabel":false,"label":"takedmg","title":"","message":"/addvar key=hp -1 | /echo severity=warning The monster hits you. |\n/max 0 hp | /setvar key=hp","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":28,"icon":"","showLabel":false,"label":"monsterdmg","title":"","message":"/echo You attack the monster. |\n/setvar key=dmg 1 |\n/if left=atkelem right=none rule=in {: /setvar key=atkelem physical :} |\n\n/if left=atkelem right=monsterweakness rule=in {:\n  /addvar key=dmg 3 |\n  /echo severity=success That attack was super effective.\n:} |\n\n/if left=atkelem right=monsterimmunity rule=in {:\n  /setvar key=dmg 0 |\n  /echo severity=warning That attack had no effect.\n:} |\n\n/addvar key=monsterhp -{{getvar::dmg}} |\n/max monsterhp 0 | /setvar key=monsterhp","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":30,"icon":"","showLabel":false,"label":"colorize","title":"","message":"/if left={{getvar::element}} right=fire rule=in {: /setvar key=element <font color={{getvar::firecolor}}>{{getvar::tocolor}}üî•</font> :} |\n/if left={{getvar::element}} right=ice rule=in {: /setvar key=element <font color={{getvar::icecolor}}>{{getvar::tocolor}}‚ùÑÔ∏è</font> :} |\n/if left={{getvar::element}} right=lightning rule=in {: /setvar key=element <font color={{getvar::lightningcolor}}>{{getvar::tocolor}}‚ö°</font> :} |\n/if left={{getvar::element}} right=none rule=in {: /setvar key=element <font color={{getvar::neutralcolor}}>{{getvar::tocolor}}üëä</font> :} |\n/if left={{getvar::element}} right=chaos rule=in {: /setvar key=element <font color=#a17be5>{{getvar::tocolor}}üé≤</font> :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":32,"icon":"","showLabel":false,"label":"winbattle","title":"","message":"/echo severity=success You win! |\n/addvar key=killcount 1 |\n/if left=killcount right=16 rule=gte else={: /run escapethedungeon.genitem :} {: /run escapethedungeon.showendingpopup :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":34,"icon":"","showLabel":false,"label":"gameover","title":"","message":"/echo severity=error You lose. Game over. |\n/setvar key=jbout Describe the next scene vividly: The duo has lost the battle against {{getvar::monstername}}, and more monsters come to surround them. {{user}}, weakened as he is, is pinned to the ground while {{getvar::magename}} is held down. The monsters tear off her clothes and begin to rape her, this is the last scene {{user}} sees before he is knocked out and killed. Game over.","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":36,"icon":"","showLabel":false,"label":"genitem","title":"","message":"/setvar key=jbout The duo defeated {{getvar::monstername}}. The attack that killed it: {{getvar::lasthit}}. They looted the monster and found {{random::a health potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Health potion\nType: Potion\nDescription: Its description\n```::a mana potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Mana potion\nType: Potion\nDescription: Its description\n```::a weapon. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the weapon\nType: Weapon\nDescription: Its description\nEnchantment: Choose one: Fire/Ice/Lightning/None\nCondition: Its current condition from 1 to 15, where 15 is pristine condition. Although these are rare, most common is around 6 to 12\n```::a collectible. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the item\nType: Collectible\nDescription: Its description. Valuable, but useless in battle.\n```::nothing.::nothing.::nothing.::nothing.}}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":40,"icon":"","showLabel":false,"label":"pickitem","title":"","message":"/if left=itemtype right=pot rule=in {: /run escapethedungeon.usepotion :} |\n/if left=itemtype right=weap rule=in {: /run escapethedungeon.equiploop :} |\n/if left=itemtype right=collect rule=in {: /run escapethedungeon.pickcollectible :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":44,"icon":"","showLabel":false,"label":"equiploop","title":"","message":"/setvar key=looping true |\n/while left=looping right=true rule=eq {:\n\t/getvar index=cond lweap |\n\t/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=lweapbar |\n\t\n\t/getvar index=cond rweap |\n\t/div {{pipe}} maxcond | /mul {{pipe}} 100 | /setvar key=rweapbar |\n\t\n\t/setvar key=endregex (\\n[\\S\\s]+?[:\\-]\\s\\|\\n(?<=[\\S\\s]+?[:\\-][\\S\\s]+)```) |\n\t\n\t/setvar key=startregex enchantment\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=itemelem |\n\t\n\t/setvar key=startregex condition\\s?[:\\-]\\s |\n\t/run creamsan.regextract | /setvar key=itemcond |\n\t\n\t/setvar key=tocolor {{getvar::itemname}} |\n\t/setvar key=element {{getvar::itemelem}} |\n\t/run escapethedungeon.colorize | /setvar key=itemnamedisp {{getvar::element}} |\n\t\n\t/div itemcond maxcond | /setvar key=itembar |\n\t/mul {{getvar::itembar}} 100 | /setvar key=itembar |\n\t\n\t/buttons labels=[\"EquipLeft\",\"EquipRight\"] <div>\n\t<style>.weapbar{width: 30px; height: 8px; border: 1px solid grey} .ui{width: 50%; border-radius: 3px; padding: 3px} .namebar{display: flex; align-items: center; gap: 3px}}</style>\n<h3>üó°Ô∏è You found a weapon! Cancel to discard. üî´</h3>\n\t\n<div style='display: flex; justify-content: center; gap: 2px; text-align: left'>\n\t\n<div class='ui' style='border: 1px solid green'>\n\t\n  Your weapons<br>\n  <div class='namebar'>\n    L: {{getvar::lweapname}} <div class='weapbar'><div style='background-color: grey; height: 100%; width: {{getvar::lweapbar}}%'></div></div>\n  </div><br>\n  <div class='namebar'>\n    R: {{getvar::rweapname}} <div class='weapbar'><div style='background-color: grey; height: 100%; width: {{getvar::rweapbar}}%'></div></div>\n  </div><br><br>\n\n</div>\n\t\n<div class='ui' style='border: 1px solid aqua'>\n\n  NEW!<br>\n  <div class='namebar'>\n    {{getvar::itemnamedisp}} <div class='weapbar'><div style='background-color: grey; height: 100%; width: {{getvar::itembar}}%'></div></div>\n  </div><br><br>\n  \n  {{getvar::itemdesc}}\n  \n</div>\n</div>\n</div><br><br> |\n\n\t/setvar key=action |\n\t/setvar key=varname action | /run creamsan.isvardefined |\n\t/if left={{pipe}} right=false rule=eq {: /setvar key=action empty :} |\n\t\n\t/if left=action right=toconfirm rule=neq {:\n\t  /echo Click again to confirm. |\n\t  /setvar key=toconfirm {{getvar::action}} |\n\t  /abort\n\t:} |\n\t\n\t/if left=action right=empty rule=neq else={: /echo Discarded weapon. :} {: /run escapethedungeon.selectweap :} |\n\t/setvar key=looping false |\n\t/flushvar toconfirm\n:}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":46,"icon":"","showLabel":false,"label":"selectweap","title":"","message":"/if left=action right=EquipLeft rule=eq else={: /setvar key=weap rweap :} {: /setvar key=weap lweap :} |\n\n/setvar index=name key={{getvar::weap}} {{getvar::itemname}} |\n/setvar index=elem key={{getvar::weap}} {{getvar::itemelem}} |\n/setvar index=cond key={{getvar::weap}} {{getvar::itemcond}} |\n\n/getvar index=name {{getvar::weap}} | /setvar key=tocolor |\n/getvar index=elem {{getvar::weap}} | /setvar key=element |\n/run escapethedungeon.colorize | /setvar key=\"{{getvar::weap}}name\" {{getvar::element}} |\n\n/echo severity=success Equipped new weapon! |\n/flushvar weap","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":48,"icon":"","showLabel":false,"label":"usepotion","title":"","message":"/if left=itemname right=heal rule=in {:\n  /echo severity=success Restored some HP. |\n  /addvar key=hp 3 | /min hp maxhp |\n  /setvar key=hp\n:} |\n\n/if left=itemname right=mana rule=in {:\n  /echo severity=success Restored some MP. |\n  /addvar key=mp 3 | /min mp maxmp |\n  /setvar key=mp\n:}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":50,"icon":"","showLabel":false,"label":"pickcollectible","title":"","message":"/createentry file=\"Escape the Dungeon\" key=\"{{getvar::itemname}}\" Name: {{getvar::itemname}}\nType: Collectible Item\nDescription: {{getvar::itemdesc}} |\n/findentry file=\"Escape the Dungeon\" {{getvar::itemname}} | /setvar key=uid | /setentryfield file=\"Escape the Dungeon\" uid={{getvar::uid}} field=position 3 |\n/echo severity=success Picked up {{getvar::itemname}}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":52,"icon":"","showLabel":false,"label":"showendingpopup","title":"","message":"/if left=mage right=fire rule=in {: /setvar key=imglink https://files.catbox.moe/zophfs.png :} |\n/if left=mage right=lightning rule=in {: /setvar key=imglink https://files.catbox.moe/wpl6x0.png :} |\n/if left=mage right=chaos rule=in {: /setvar key=imglink https://files.catbox.moe/g3kiqz.png :} |\n/if left=mage right=ice rule=in {: /setvar key=imglink https://files.catbox.moe/hj2yzu.png :} |\n\n/setvar key=jbout The way out is in sight, the final boss monster defeated. They have finally reached the end. |\n/popup <h1>Congratulations</h1>\n<font color=red><img style='width: 300px' src='{{getvar::imglink}}' alt='Image loading failed :('></font><br><br>\nYou have escaped the dungeon.<br><br>\n<hr><br><br>\nThanks for playing. If you've made it this far, it means that the script is working as intended, I really hope so. If you encountered any problems, please let me know. Upcoming updates will probably just be bug fixes or balancing, as I don't want to add any more features.<br>\nFrom this point on you should use the normal send button on the right instead of the QR send button.<br>\nAlso, check the lorebook for items you've collected along the way. Maybe you can make use of them for your ongoing story.<br>\n<hr><br><br>","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":54,"icon":"","showLabel":false,"label":"findrandomitem","title":"","message":"/pass {{roll: d6}} |\n/if left={{pipe}} right=1 rule=eq {: /setvar key=jbout While exploring the dungeon, the duo randomly finds {{random::a health potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Health potion\nType: Potion\nDescription: Its description\n```::a mana potion. Generate and include this in the response. Adhere to the following format in code block: ```\nName: Mana potion\nType: Potion\nDescription: Its description\n```::a weapon. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the weapon\nType: Weapon\nDescription: Its description\nEnchantment: Choose one: Fire/Ice/Lightning/None.\nCondition: Its current condition from 1 to 15, where 15 is pristine condition. Although these are rare, most common is around 6 to 12.\n```::a collectible. Generate and include this in the response. The weirder, the better. Be creative, descriptive, and humorous. Adhere to the following format in code block: ```\nName: Name of the item\nType: Collectible\nDescription: Its description. Valuable, but useless in battle.\n```}} :}","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":56,"showLabel":false,"label":"regengreet","title":"","message":"/addswipe switch=true You wake up with a throbbing headache on the cold, damp floor of a dimly lit dungeon. Your blurred vision begins to clear, and you notice a mage lying unconscious beside you. As the distant growl of a menacing monster echoes off the dank stone walls, {{getvar::magename}}'s eyes flutter open.\n\nDisoriented, she slowly sits up and scans the unfamiliar surroundings. Her eyes dart back and forth, trying to make sense of the situation, before settling on you. \"{{user}}, what happened?\" she asks in a tone of both confusion and urgency.","contextList":[],"preventAutoExecute":true,"isHidden":true,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""}],"idIndex":56}